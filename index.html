<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØª Ø¥Ù„Ù‰ Ù†Øµ</title>
  <style>
    /* Ø®Ù„ÙÙŠØ© Ø§Ù„ØµÙØ­Ø© */
    body {
      margin: 0;
      padding: 0;
      background-color: #000; /* Ø£Ø³ÙˆØ¯ */
      color: #fff;
      font-family: Tahoma, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      flex-direction: column;
    }

    /* ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
    .container {
      background-color: #111;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
      text-align: center;
      width: 90%;
      max-width: 600px;
    }

    h1 {
      margin-bottom: 20px;
      font-size: 24px;
    }

    button {
      padding: 12px 24px;
      font-size: 18px;
      margin: 10px 5px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: 0.3s;
    }

    #startBtn {
      background-color: #4CAF50;
      color: white;
    }

    #stopBtn {
      background-color: #f44336;
      color: white;
      display: none;
    }

    button:hover {
      opacity: 0.85;
    }

    #recordingIndicator {
      display: none;
      color: #ff5252;
      font-weight: bold;
      margin-top: 10px;
    }

    #recordingDot {
      display: inline-block;
      width: 12px;
      height: 12px;
      background-color: red;
      border-radius: 50%;
      margin-left: 8px;
      animation: blink 1s infinite;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0; }
    }

    #output {
      background: #222;
      border: 1px solid #444;
      padding: 15px;
      border-radius: 8px;
      margin-top: 20px;
      font-size: 18px;
      min-height: 80px;
      white-space: pre-wrap;
      color: #ddd;
    }

    textarea {
      width: 96%;
      margin-top: 15px;
      padding: 12px;
      font-size: 16px;
      border-radius: 6px;
      border: 1px solid #555;
      background-color: #1a1a1a;
      color: #fff;
      resize: vertical;
    }

    /* Ø³ØªØ§ÙŠÙ„ Ø§Ù„ÙÙˆØªØ± */
    footer {
      margin-top: 15px;
      font-size: 14px;
      color: #888;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>  ğ“…“ ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØª Ø¥Ù„Ù‰ Ù†Øµ (ÙƒØ±ÙˆÙ… ÙÙ‚Ø·)</h1>
    <button id="startBtn" onclick="startRecognition()">[â–¶ï¸] Ø¨Ø¯Ø¡ Ø§Ù„ØªØ³Ø¬ÙŠÙ„</button>
    <button id="stopBtn" onclick="stopRecognition()">[X] Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªØ³Ø¬ÙŠÙ„</button>

    <div id="recordingIndicator">
      <span id="recordingDot"></span> â–¶ï¸ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„...
    </div>

    <div id="output"></div>

    <textarea id="textField" rows="4" placeholder="Ø§Ù„ØµÙ‚ Ø§Ù„Ù†Øµ Ù‡Ù†Ø§ Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª (Ctrl + V)"></textarea>

    <footer>
      &copy; 2025 DRAGON&CHEAT 
    </footer>
  </div>

  <script>
    let recognition;
    let finalTranscript = "";

    function wordsToNumbersInText(text) {
      const units = {
        "ØµÙØ±": 0, "ÙˆØ§Ø­Ø¯": 1, "ÙˆØ§Ø­Ø¯Ø©": 1, "Ø§Ø­Ø¯": 1, "Ø§Ø­Ø¯Ù‰": 1,
        "Ø§Ø«Ù†Ø§Ù†": 2, "Ø§Ø«Ù†ÙŠÙ†": 2, "Ø§Ø«Ù†ØªØ§Ù†": 2, "Ø§Ø«Ù†ØªÙŠÙ†": 2, "Ø«Ù†ÙŠÙ†": 2,
        "Ø«Ù„Ø§Ø«Ø©": 3, "Ø«Ù„Ø§Ø«": 3,
        "Ø£Ø±Ø¨Ø¹Ø©": 4, "Ø§Ø±Ø¨Ø¹Ø©": 4, "Ø§Ø±Ø¨Ø¹": 4,
        "Ø®Ù…Ø³Ø©": 5, "Ø®Ù…Ø³": 5,
        "Ø³ØªØ©": 6, "Ø³Øª": 6,
        "Ø³Ø¨Ø¹Ø©": 7, "Ø³Ø¨Ø¹": 7,
        "Ø«Ù…Ø§Ù†ÙŠØ©": 8, "Ø«Ù…Ø§Ù†": 8,
        "ØªØ³Ø¹Ø©": 9, "ØªØ³Ø¹": 9
      };

      const teens = {
        "Ø¹Ø´Ø±Ø©": 10, "Ø¹Ø´Ø±": 10,
        "Ø£Ø­Ø¯ Ø¹Ø´Ø±": 11, "Ø§Ø­Ø¯ Ø¹Ø´Ø±": 11, "Ø§Ø­Ø¯Ù‰ Ø¹Ø´Ø±": 11,
        "Ø§Ø«Ù†Ø§ Ø¹Ø´Ø±": 12, "Ø§Ø«Ù†ÙŠ Ø¹Ø´Ø±": 12,
        "Ø«Ù„Ø§Ø«Ø© Ø¹Ø´Ø±": 13, "Ø£Ø±Ø¨Ø¹Ø© Ø¹Ø´Ø±": 14, "Ø®Ù…Ø³Ø© Ø¹Ø´Ø±": 15,
        "Ø³ØªØ© Ø¹Ø´Ø±": 16, "Ø³Ø¨Ø¹Ø© Ø¹Ø´Ø±": 17, "Ø«Ù…Ø§Ù†ÙŠØ© Ø¹Ø´Ø±": 18, "ØªØ³Ø¹Ø© Ø¹Ø´Ø±": 19
      };

      const tens = {
        "Ø¹Ø´Ø±ÙˆÙ†": 20, "Ø¹Ø´Ø±ÙŠÙ†": 20,
        "Ø«Ù„Ø§Ø«ÙˆÙ†": 30, "Ø«Ù„Ø§Ø«ÙŠÙ†": 30,
        "Ø£Ø±Ø¨Ø¹ÙˆÙ†": 40, "Ø§Ø±Ø¨Ø¹ÙŠÙ†": 40,
        "Ø®Ù…Ø³ÙˆÙ†": 50, "Ø®Ù…Ø³ÙŠÙ†": 50,
        "Ø³ØªÙˆÙ†": 60, "Ø³ØªÙŠÙ†": 60,
        "Ø³Ø¨Ø¹ÙˆÙ†": 70, "Ø³Ø¨Ø¹ÙŠÙ†": 70,
        "Ø«Ù…Ø§Ù†ÙˆÙ†": 80, "Ø«Ù…Ø§Ù†ÙŠÙ†": 80,
        "ØªØ³Ø¹ÙˆÙ†": 90, "ØªØ³Ø¹ÙŠÙ†": 90
      };

      const hundreds = {
        "Ù…Ø§Ø¦Ø©": 100, "Ù…Ø¦Ø©": 100, "Ù…ÙŠØ©": 100,
        "Ù…Ø¦ØªÙŠÙ†": 200, "Ù…ÙŠØªÙŠÙ†": 200,
        "Ø«Ù„Ø§Ø«Ù…Ø§Ø¦Ø©": 300, "Ø«Ù„Ø§Ø«Ù…ÙŠØ©": 300,
        "Ø£Ø±Ø¨Ø¹Ù…Ø§Ø¦Ø©": 400, "Ø§Ø±Ø¨Ø¹Ù…Ø§ÙŠØ©": 400,
        "Ø®Ù…Ø³Ù…Ø§Ø¦Ø©": 500, "Ø®Ù…Ø³Ù…Ø§ÙŠØ©": 500,
        "Ø³ØªÙ…Ø§Ø¦Ø©": 600, "Ø³ØªÙ…ÙŠØ©": 600,
        "Ø³Ø¨Ø¹Ù…Ø§Ø¦Ø©": 700, "Ø³Ø¨Ø¹Ù…ÙŠØ©": 700,
        "Ø«Ù…Ø§Ù†Ù…Ø§Ø¦Ø©": 800, "Ø«Ù…Ø§Ù†Ù…ÙŠØ©": 800,
        "ØªØ³Ø¹Ù…Ø§Ø¦Ø©": 900, "ØªØ³Ø¹Ù…ÙŠØ©": 900
      };

      const multipliers = {
        "Ø£Ù„Ù": 1000, "Ø§Ù„Ù": 1000, "Ø£Ù„ÙÙŠÙ†": 2000, "Ø§Ù„ÙÙŠÙ†": 2000,
        "Ø¢Ù„Ø§Ù": 1000,
        "Ù…Ù„ÙŠÙˆÙ†": 1000000, "Ù…Ù„Ø§ÙŠÙŠÙ†": 1000000
      };

      const allWords = Object.assign({}, units, teens, tens, hundreds, multipliers);

      const tokens = text.replace(/ØŒ/g, " ").replace(/ Ùˆ /g, " ").trim().split(/\s+/);
      let resultWords = [];
      let numberBuffer = [];

      function processBuffer(buffer) {
        let total = 0;
        let current = 0;

        buffer.forEach((word, i) => {
          if (teens[word] !== undefined) {
            current += teens[word];
          } else if (units[word] !== undefined) {
            current += units[word];
          } else if (tens[word] !== undefined) {
            current += tens[word];
          } else if (hundreds[word] !== undefined) {
            current += hundreds[word];
          } else if (multipliers[word] !== undefined) {
            if (current === 0) current = 1;
            current *= multipliers[word];
            total += current;
            current = 0;
          }
        });

        total += current;
        return total;
      }

      for (let i = 0; i < tokens.length; i++) {
        const word = tokens[i];
        const fullTwoWords = tokens[i] + " " + (tokens[i + 1] || "");

        if (teens[fullTwoWords]) {
          numberBuffer.push(fullTwoWords);
          i++; // ØªØ®Ø·ÙŠ Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©
          continue;
        }

        if (allWords[word]) {
          numberBuffer.push(word);
        } else {
          if (numberBuffer.length > 0) {
            const num = processBuffer(numberBuffer);
            resultWords.push(num.toString());
            numberBuffer = [];
          }
          resultWords.push(word);
        }
      }

      if (numberBuffer.length > 0) {
        const num = processBuffer(numberBuffer);
        resultWords.push(num.toString());
      }

      return resultWords.join(" ");
    }

    function startRecognition() {
      const SpeechRecognition = window.webkitSpeechRecognition;
      if (!SpeechRecognition) {
        alert("âŒ Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø© ØªØ¹Ù…Ù„ ÙÙ‚Ø· Ø¹Ù„Ù‰ Ù…ØªØµÙØ­ Chrome.");
        return;
      }

      recognition = new SpeechRecognition();
      recognition.lang = 'ar-IQ'; // Ø¯Ø¹Ù… Ù„Ù‡Ø¬Ø© Ø§Ù„Ø¹Ø±Ø§Ù‚
      recognition.interimResults = false;

      recognition.onstart = function () {
        document.getElementById("recordingIndicator").style.display = "block";
        document.getElementById("startBtn").style.display = "none";
        document.getElementById("stopBtn").style.display = "inline-block";
      };

      recognition.onresult = function (event) {
        const transcript = event.results[0][0].transcript;
        const converted = wordsToNumbersInText(transcript);
        document.getElementById("output").innerText = converted;

        // Ù†Ø³Ø® Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§
        navigator.clipboard.writeText(converted);
      };

      recognition.onerror = function (event) {
        alert("Ø­Ø¯Ø« Ø®Ø·Ø£: " + event.error);
      };

      recognition.onend = function () {
        document.getElementById("recordingIndicator").style.display = "none";
        document.getElementById("startBtn").style.display = "inline-block";
        document.getElementById("stopBtn").style.display = "none";
      };

      recognition.start();
    }

    function stopRecognition() {
      if (recognition) {
        recognition.stop();
      }
    }
  </script>
</body>
</html>
