<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>ØªØ­ÙˆÙŠÙ„ Ø§Ù„ØµÙˆØª Ø¥Ù„Ù‰ Ø£Ø±Ù‚Ø§Ù…</title>
</head>
<body>
  <button id="startBtn">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ­Ø¯Ø«</button>

  <script>
    function wordsToNumbersInText(text) {
      const units = {
        "ØµÙØ±":0,"ÙˆØ§Ø­Ø¯":1,"ÙˆØ§Ø­Ø¯Ø©":1,"Ø§Ø­Ø¯":1,"Ø§Ø­Ø¯Ù‰":1,
        "Ø§Ø«Ù†Ø§Ù†":2,"Ø§Ø«Ù†ÙŠÙ†":2,"Ø§ØªÙ†ÙŠÙ†":2,"Ø§Ø«Ù†ØªØ§Ù†":2,"Ø§Ø«Ù†ØªÙŠÙ†":2,"Ø«Ù†ÙŠÙ†":2,
        "Ø«Ù„Ø§Ø«Ø©":3,"Ø«Ù„Ø§Ø«":3,"ØªÙ„Ø§ØªÙ‡":3,"ØªÙ„Ø§Øª":3,
        "Ø£Ø±Ø¨Ø¹Ø©":4,"Ø§Ø±Ø¨Ø¹Ø©":4,"Ø§Ø±Ø¨Ø¹":4,
        "Ø®Ù…Ø³Ø©":5,"Ø®Ù…Ø³":5,
        "Ø³ØªØ©":6,"Ø³Øª":6,
        "Ø³Ø¨Ø¹Ø©":7,"Ø³Ø¨Ø¹":7,
        "Ø«Ù…Ø§Ù†ÙŠØ©":8,"Ø«Ù…Ø§Ù†":8,"ØªÙ…Ø§Ù†ÙŠØ©":8,"ØªÙ…Ù†ÙŠÙ‡":8,"Ø«Ù…Ù†ÙŠÙ‡":8,
        "ØªØ³Ø¹Ø©":9,"ØªØ³Ø¹":9
      };

      const teens = {
        "Ø¹Ø´Ø±Ø©":10,"Ø¹Ø´Ø±":10,
        "Ø§Ø­Ø¯ Ø¹Ø´Ø±":11,"Ø£Ø­Ø¯ Ø¹Ø´Ø±":11,"Ø§Ø­Ø¯Ù‰ Ø¹Ø´Ø±":11,
        "Ø§Ø«Ù†Ø§ Ø¹Ø´Ø±":12,"Ø§Ø«Ù†ÙŠ Ø¹Ø´Ø±":12,"Ø§ØªÙ†Ø¹Ø´Ø±":12,
        "Ø«Ù„Ø§Ø«Ø© Ø¹Ø´Ø±":13,"Ø«Ù„Ø§Ø« Ø¹Ø´Ø±":13,"ØªÙ„Ø§ØªØ¹Ø´Ø±":13,
        "Ø£Ø±Ø¨Ø¹Ø© Ø¹Ø´Ø±":14,"Ø§Ø±Ø¨Ø¹Ø© Ø¹Ø´Ø±":14,
        "Ø®Ù…Ø³Ø© Ø¹Ø´Ø±":15,"Ø®Ù…Ø³ØªØ¹Ø´Ø±":15,
        "Ø³ØªØ© Ø¹Ø´Ø±":16,"Ø³ØªØ¹Ø´Ø±":16,
        "Ø³Ø¨Ø¹Ø© Ø¹Ø´Ø±":17,"Ø³Ø¨Ø¹ØªØ¹Ø´Ø±":17,
        "Ø«Ù…Ø§Ù†ÙŠØ© Ø¹Ø´Ø±":18,"ØªÙ…Ù†ØªØ¹Ø´Ø±":18,
        "ØªØ³Ø¹Ø© Ø¹Ø´Ø±":19,"ØªØ³Ø¹ØªØ¹Ø´Ø±":19
      };

      const tens = {
        "Ø¹Ø´Ø±ÙˆÙ†":20,"Ø¹Ø´Ø±ÙŠÙ†":20,
        "Ø«Ù„Ø§Ø«ÙˆÙ†":30,"Ø«Ù„Ø§Ø«ÙŠÙ†":30,"ØªÙ„Ø§ØªÙŠÙ†":30,
        "Ø£Ø±Ø¨Ø¹ÙˆÙ†":40,"Ø§Ø±Ø¨Ø¹ÙŠÙ†":40,
        "Ø®Ù…Ø³ÙˆÙ†":50,"Ø®Ù…Ø³ÙŠÙ†":50,
        "Ø³ØªÙˆÙ†":60,"Ø³ØªÙŠÙ†":60,
        "Ø³Ø¨Ø¹ÙˆÙ†":70,"Ø³Ø¨Ø¹ÙŠÙ†":70,
        "Ø«Ù…Ø§Ù†ÙˆÙ†":80,"Ø«Ù…Ø§Ù†ÙŠÙ†":80,"ØªÙ…Ø§Ù†ÙˆÙ†":80,"ØªÙ…Ø§Ù†ÙŠÙ†":80,
        "ØªØ³Ø¹ÙˆÙ†":90,"ØªØ³Ø¹ÙŠÙ†":90
      };

      const hundreds = {
        "Ù…Ø§Ø¦Ø©":100,"Ù…Ø¦Ø©":100,"Ù…ÙŠÙ‡":100,"Ù…ÙŠØ©":100,
        "Ù…Ø¦ØªÙŠÙ†":200,"Ù…ÙŠØªÙŠÙ†":200,
        "Ø«Ù„Ø§Ø«Ù…Ø§Ø¦Ø©":300,"Ø«Ù„Ø§Ø«Ù…ÙŠØ©":300,
        "Ø£Ø±Ø¨Ø¹Ù…Ø§Ø¦Ø©":400,"Ø§Ø±Ø¨Ø¹Ù…Ø§ÙŠØ©":400,"Ø§Ø±Ø¨Ø¹Ù…ÙŠØ©":400,
        "Ø®Ù…Ø³Ù…Ø§Ø¦Ø©":500,"Ø®Ù…Ø³Ù…Ø§ÙŠØ©":500,"Ø®Ù…Ø³Ù…ÙŠØ©":500,
        "Ø³ØªÙ…Ø§Ø¦Ø©":600,"Ø³ØªÙ…ÙŠØ©":600,
        "Ø³Ø¨Ø¹Ù…Ø§Ø¦Ø©":700,"Ø³Ø¨Ø¹Ù…ÙŠØ©":700,
        "Ø«Ù…Ø§Ù†Ù…Ø§Ø¦Ø©":800,"Ø«Ù…Ø§Ù†Ù…ÙŠØ©":800,"ØªÙ…Ù†Ù…ÙŠØ©":800,"Ø«Ù…Ù†Ù…ÙŠØ©":800,
        "ØªØ³Ø¹Ù…Ø§Ø¦Ø©":900,"ØªØ³Ø¹Ù…ÙŠØ©":900
      };

      const multipliers = {
        "Ø£Ù„Ù":1000,"Ø§Ù„Ù":1000,"Ø§Ù„ÙÙŠÙ†":2000,"Ø£Ù„ÙÙŠÙ†":2000,"Ø¢Ù„Ø§Ù":1000,
        "Ù…Ù„ÙŠÙˆÙ†":1000000,"Ù…Ù„Ø§ÙŠÙŠÙ†":1000000,
        "Ù…Ù„ÙŠØ§Ø±":1000000000,"Ù…Ù„ÙŠØ§Ø±Ø§Øª":1000000000
      };

      const allWords = Object.assign({}, units, teens, tens, hundreds, multipliers);

      // ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ù†Øµ Ø¥Ù„Ù‰ ÙƒÙ„Ù…Ø§Øª
      const tokens = text.replace(/ØŒ/g," ").replace(/\s+Ùˆ\s+/g," ").trim().split(/\s+/);

      let result = [];
      let buffer = [];
      
      function flushBuffer() {
        if (buffer.length === 0) return null;

        let total = 0, current = 0;
        buffer.forEach(word => {
          if(teens[word]!==undefined){
            current += teens[word];
          } else if(units[word]!==undefined){
            current += units[word];
          } else if(tens[word]!==undefined){
            current += tens[word];
          } else if(hundreds[word]!==undefined){
            current += hundreds[word];
          } else if(multipliers[word]!==undefined){
            let mult = multipliers[word];
            if (current === 0) current = 1;
            current *= mult;
            total += current;
            current = 0;
          }
        });
        total += current;

        buffer = [];
        return total;
      }

      tokens.forEach(word=>{
        if(allWords[word]!==undefined){
          buffer.push(word);
        } else {
          let num = flushBuffer();
          if(num!==null) result.push(num.toString());
          result.push(word);
        }
      });

      let num = flushBuffer();
      if(num!==null) result.push(num.toString());

      return result.join(" ");
    }

    // ðŸŽ¤ ÙƒÙˆØ¯ Ø§Ù„ØµÙˆØª
    const recognition = new webkitSpeechRecognition();
    recognition.lang = "ar-SA";

    recognition.onresult = function(event) {
      let transcript = event.results[0][0].transcript;
      let converted = wordsToNumbersInText(transcript);
      console.log("Ø§Ù„Ù†Øµ:", transcript);
      console.log("Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„:", converted);
      alert("Ø§Ù„Ù†Øµ: " + transcript + "\nØ¨Ø¹Ø¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„: " + converted);
    };

    document.getElementById("startBtn").addEventListener("click", ()=>{
      recognition.start();
    });
  </script>
</body>
</html>
