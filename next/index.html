<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Voice Vssistant </title>
<style>
/* === ุงูุชูุณููุงุช ุงูุฃุตููุฉ ูุน ุชุนุฏูู ุฒุฑ ุงููููุงุช ุงูุฐููุฉ === */
body{ overflow: hidden; margin:0;padding:0;background-color:#000;color:#fff;/*font-family:Tahoma,sans-serif*/;display:flex;justify-content:center;align-items:center;height:100vh;flex-direction:column}
.login-container{background-color:#111;padding:15px;border-radius:12px;box-shadow:0 0 20px rgba(255,255,255,0.15);text-align:center;width:90%;max-width:400px;display:none}
.login-container h2{margin-bottom:20px;font-size:22px;color:#ffcc00}
.login-container input{width:90%;padding:12px;font-family: monospace;margin-top:0px;margin:10px 0;border-radius:8px;border:1px solid #444;background-color:#1a1a1a;color:#fff;font-size:16px;text-align:center;direction:ltr;unicode-bidi:embed}
.login-container label{font-size:14px;display:inline-block;align-items:center;justify-content:center;gap:1px;margin-top:10px;cursor:pointer;width:-55โ;text-align:center;position:relative;top:11px}
.login-container button{/*padding:12px 24px;*/font-size:18px;/*margin-top:15px;*/border:none;border-radius:8px;background-color:#6aab30d9;color:white;cursor:pointer;transition:0.3s}
.login-container button:hover{opacity:0.85}
.container{top:-34px;background-color:#111;padding:25px;border-radius:12px;box-shadow:0 0 20px rgba(255,255,255,0.1);text-align:center;width:82%;max-width:600px;transition:all 0.3s ease;display:none;position:relative}
h1{font-family:bodoni,cursive; color:rgba(196, 144, 217, 0.70); margin-bottom:0px;font-size:17px;transition:font-size 0.3s ease}
button{padding:12px 24px;font-size:18px;margin:0px 0px;border:none;border-radius:8px;cursor:pointer;transition:0.3s,font-size 0.3s ease,padding 0.3s ease}
#startBtn{background-color:#4CAF50;color:white}
#stopBtn{background-color:#f44336;color:white;display:none}
button:hover{opacity:0.85}
#recordingIndicator{display:none;color:#ff5252;font-weight:bold;font-size:11px;margin-top:0px}
#recordingDot{display:inline-block;width:12px;height:12px;background-color:red;border-radius:50%;margin-left:8px;animation:blink 1s infinite}
@keyframes blink{0%,100%{opacity:1}50%{opacity:0}}
#output{top: 4px;background:#222;border:1px solid #444;padding:15px; width:93%; border-radius:8px;margin-top:5px;font-size:18px;min-height:5px; /*white-space:pre-wrap;*/color:#ddd;transition:font-size 0.3s ease,padding 0.3s ease;direction:rtl;unicode-bidi:embed;text-align:center;position:relative;user-select:none}
#outputText{pointer-events:none} 
textarea{width:96%;margin-top:15px;padding:12px;font-size:16px;border-radius:6px;border:1px solid #555;background-color:#1a1a1a;color:#fff;resize:vertical;transition:font-size 0.3s ease,padding 0.3s ease}
#userCountContainer{top:-22px;left:15px;right:15px;display:flex;align-items:center;font-size:13px;opacity:0.8;justify-content:space-between}
#userCount{color:#0f0}
#logoutBtn{font-size:12px;padding:4px 8px;border-radius:6px;border:none;background-color:#f44336;color:white;cursor:pointer;opacity:0.9}
footer{margin-top:33px;font-size:14px;color:#b17215;text-align:center}
@keyframes rgbGlow{0%{box-shadow:0 0 40px 15px rgba(255,0,0,0.25)}20%{box-shadow:0 0 40px 15px rgba(255,165,0,0.25)}40%{box-shadow:0 0 40px 15px rgba(0,255,0,0.25)}60%{box-shadow:0 0 40px 15px rgba(0,255,255,0.25)}80%{box-shadow:0 0 40px 15px rgba(0,0,255,0.25)}100%{box-shadow:0 0 40px 15px rgba(255,0,255,0.25)}}
footer2{margin-top:-15px;font-size:14px;color:#b17215;text-align:center}
@keyframes rgbGlow{0%{box-shadow:0 0 40px 15px rgba(255,0,0,0.25)}20%{box-shadow:0 0 40px 15px rgba(255,165,0,0.25)}40%{box-shadow:0 0 40px 15px rgba(0,255,0,0.25)}60%{box-shadow:0 0 40px 15px rgba(0,255,255,0.25)}80%{box-shadow:0 0 40px 15px rgba(0,0,255,0.25)}100%{box-shadow:0 0 40px 15px rgba(255,0,255,0.25)}}
.container.recording{animation:rgbGlow 10s infinite linear}
.ltr-num {
  direction: ltr;
  unicode-bidi: embed;
}
  
#autoRestartCheckbox:hover + #autoRestartTooltip {
    visibility: visible;
    opacity: 1;
}
/* === ุชุนุฏูู ุฒุฑ ุงููููุงุช ุงูุฐููุฉ === */
#smartWordsBtn {
    position: absolute;
    top: 2px;
    left: 5px;
    padding: 3px 6px;
    font-size: 12px;
    background-color: #564d4d;
    color: #fff;
    border: none;
    /*border-radius: 4px;*/
    cursor: pointer;
    z-index: 50;
}
#smartWordsMenu {
    position: absolute;
    top: 25px;
    left: 5px;
    background: #222;
    border: 1px solid #555;
    border-radius: 6px;
    padding: 6px;
    display: none;
    flex-direction: column;
    gap: 4px;
    z-index: 51;
    width:80%;
}
.smartWordItem{display:flex;justify-content:space-between;align-items:center;background:#333;padding:2px 6px;border-radius:4px;cursor:pointer}
.smartWordItem span{flex:1;text-align:center}
.smartWordItem button{background:red;color:#fff;border:none;border-radius:4px;padding:0 4px;margin-left:4px;cursor:pointer}
#smartAddInput{display:flex;gap:4px;margin-bottom:4px}
#smartAddInput input{flex:1;padding:4px;border-radius:4px;border:1px solid #555;background:#111;color:#fff;width:70px;font-size:11px}
#smartAddInput button{padding:4px 8px;border-radius:4px;border:none;background:#4CAF50;color:#fff;font-size:12px;cursor:pointer}

/* === ุฒุฑ ุงููุงุฆูุฉ ุงูุนูููุฉ === */
#menuBtn{
    position: absolute;
    /*top: 0px;*/
    left: 17px;
    padding: 6px 12px;
    font-size: 14px;
    border-radius: 6px;
    border: none;
    background-color: #444;
    color: #fff;
    cursor: pointer;
    z-index: 1000;
}
/* ุงููุงุฆูุฉ ุงูุฃูููุฉ ุฏุงุฎู #app */
#sideMenu {
    position: absolute;       /* ุจุงููุณุจุฉ ููู container #app */
    top: 7px;                /* ูุณุงูุฉ ูู ุงูุฃุนูู ุฏุงุฎู #app */
    left: 0;
    right: 5px;
    max-width: 90%;          /* ูุง ุชุชุนุฏู ุนุฑุถ #app */
    background-color: #0a0909;
    border: 1px solid #444;
    border-radius: 8px;
    padding: 10px;
    display: none;
    flex-direction: row;      /* ุฃูููุฉ */
    flex-wrap: wrap;          /* ุงูุงูุชูุงู ุฅุฐุง ุฒุงุฏ ุงูุนุฏุฏ */
    gap: 8px;
    z-index: 1000;
    box-shadow: 0 3px 12px rgba(0,0,0,0.5);
    overflow: hidden;         /* ููุน ุชุฌุงูุฒ ุงูุญุฏูุฏ */
}

/* ุธููุฑ ุงููุงุฆูุฉ */
#sideMenu.show {
    display: flex;
}

/* ุฃุฒุฑุงุฑ ุงููุงุฆูุฉ */
#sideMenu .menuItem {
    flex: 0 0 auto;           /* ุญุฌู ุซุงุจุช ุญุณุจ ุงููุญุชูู */
    padding: 4px 6px;
    border-radius: 6px;
    background-color: #222;
    color: #fff;
    text-align: center;
    cursor: pointer;
    transition: background 0.2s ease, transform 0.2s ease;
}

#sideMenu .menuItem:hover {
    background-color: #444;
    transform: translateY(-2px);
}

/* ุฒุฑ ุชุณุฌูู ุงูุฎุฑูุฌ ุฃุญูุฑ ููุท */
#sideMenu .menuItem[onclick*="logout()"] {
    background-color: #f44336; /* ุฃุญูุฑ */
    color: #fff;
}

#sideMenu .menuItem[onclick*="logout()"]:hover {
    background-color: #d32f2f; /* ุฃุญูุฑ ุฃุบูู */
}


#togglePassword {
  user-select: none;   /* ููุน ุงูุชุญุฏูุฏ */
  -webkit-user-select: none; /* ููุน ุงูุชุญุฏูุฏ ูู ูุฑูู/ุณูุงุฑู */
  -moz-user-select: none;
  -ms-user-select: none;
}

/* ูููุฉ ุงูุฑุฌูุน ุงูุตุบูุฑุฉ ูู ุฃุนูู ุงููุงุฆูุฉ */
#backBtn {
    background: none;
    border: none;
    color: #ffcc00;
    font-size: 13px;
    font-weight: bold;
    text-align: left;
    cursor: pointer;
    padding: 0;
    margin-bottom: 8px;
    transition: color 0.2s ease;
}
#backBtn:hover {
    color: #ffff66;
}

/* ุฃุฒุฑุงุฑ ุงููุงุฆูุฉ ุงูุฃุฎุฑู */
#sideMenu .menuItem {
    padding: 4px 6px; /* ุชูููู ุงูุจุงุฏููุฌ ููููุงู */
    border-radius: 6px;
    border: none;
    cursor: pointer;
    background-color: #222;
    color: #fff;
    text-align: center;
    font-size: 12px;
    transition: background 0.2s ease, transform 0.2s ease;
}
#sideMenu .menuItem:hover {
    background-color: #444;
    transform: translateX(3px);
}

/* === ุงุณุชุฌุงุจุฉ ุงูุดุงุดุฉ === */
@media (max-width:500px){.container{padding:20px}.container h1{font-size:20px}button{font-size:16px;padding:10px 18px}#output{font-size:16px;padding:12px}textarea{font-size:14px;padding:10px}}
@media (max-width:350px){.container{padding:15px}.container h1{font-size:18px}button{font-size:14px;padding:8px 16px}#output{font-size:14px;padding:10px}textarea{font-size:13px;padding:8px}}
</style>

<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>

</head>
<body>

<!-- ุฅุถุงูุฉ ุฒุฑ ุงูุงุดุชุฑุงู ูู ูุงูุฐุฉ ุชุณุฌูู ุงูุฏุฎูู -->
<div class="login-container" id="login">
  <br><br><h2>โฑ ุชุณุฌูู ุงูุฏุฎูู โฑ</h2>
  <input type="text" id="username" placeholder="ุงุณู ุงููุณุชุฎุฏู">
  
  <div style="position: relative;">
  <input type="password" id="password" placeholder="ูููุฉ ุงููุฑูุฑ" readonly>
  <span id="togglePassword" 
        style="position:absolute; right:10px; top:50%; transform:translateY(-50%);">
     โ
  </span>
</div>

  <label><input type="checkbox" id="rememberMe"> ุฐูุฑูู</label>
  <button id="loginBtn">ุฏุฎูู</button>
<button id="signupBtn">ุงุดุชุฑู</button>
<p id="loginWarning" style="color:orange; display:none; margin-top:5px; font-size:14px;"></p>
<p id="error" style="color:red; display:none;">!! ุฎุทุฃ ูู ุงุณู ุงููุณุชุฎุฏู ุฃู ูููุฉ ุงููุฑูุฑ</p>
<footer>
  &copy; DEV:DRAGON&CHEAT 2025 
</footer>

<br><a href="https://wa.me/9647731200180" target="_blank" 
   style="
      position: fixed;
      left: 10px;
      background-color: rgba(37, 211, 102, 12%); /* ุฃุฎุถุฑ ุดูุงู */
      color: white;
      padding: 4px 6px; /* ุฃุตุบุฑ ูู ูุจู */
      border-radius: 50px;
      font-size: 11px; /* ุฃุตุบุฑ */
      text-decoration: none;
      top:8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      z-index: 9999;
      transition: transform 0.2s, opacity 0.2s; /* ุชุฃุซูุฑ ุนูุฏ ุงููุฑูุฑ */
   "
   onmouseover="this.style.transform='scale(1.1)'; this.style.opacity='1';"
   onmouseout="this.style.transform='scale(1)'; this.style.opacity='0.8';"
>
   โ ูุงุชุณุงุจ
</a>


</div>

<!-- ูุงูุฐุฉ ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏุฉ -->
<div class="login-container" id="signupContainer" style="display:none;">
  <h2>โฑ ุฅูุดุงุก ุญุณุงุจ โฑ</h2>
  <input type="text" id="newUsername" placeholder="ุงุณู ุงููุณุชุฎุฏู">
  <input type="text" id="phone" placeholder="ุฑูู ุงููุงุชู" class="ltr-num">
  
  <!-- ุฎุงูุฉ ูููุฉ ุงููุฑูุฑ ุงููุณุชุฑุฌุนุฉ -->
<input type="password" id="showPassword" placeholder="Password verification" 
       readonly style="font-family: monospace;margin-top:10px; cursor:pointer; display:block;">

<!-- ุนูุตุฑ ุงูุฑุณุงูุฉ ูุธูุฑ ููุง -->
<span id="copyMessage" style="color:#0f0; font-size:14px; display:none; margin-top:6px;top:-11px;"></span>

  
  <button id="submitSignup">ุฅุฑุณุงู ุทูุจ</button>
  <button id="cancelSignup">ุฑุฌูุน</button>
<p id="signupWarning" style="color:orange; display:none; margin-top:5px; font-size:14px;"></p>
  <!-- ุฑุณุงูุฉ ุญุงูุฉ -->
  <p id="signupMsg" style="color:green; display:none;"></p>
  
<!-- ููุงุญุธุฉ ุงูุงุดุชุฑุงู -->
<!-- ุทุฑู ุงูุงุดุชุฑุงู ูุน ุงูุดุฑูุงุช -->
<div id="signupNote" style="font-size:12px;color:#2be3c9;/*background:#222;border:1px solid #444;*/border-radius:6px;padding:8px 10px;margin-top:8px;line-height:1.4;text-align:right; position:relative;">
  <strong style="display:block;text-align:right;">ุทุฑู ุงูุงุดุชุฑุงู ูุชูุนูู ุงูุญุณุงุจ:</strong>

  <div style="display:flex; gap:9px; justify-content:center; margin-top:6px; position:relative;">

    <!-- ุฒุฑ ุดุฑูุงุช ุงูุงุชุตุงูุงุช: ุณูุงูู + ููุงูู ููุง ูุงูุช -->
    <!-- ุฒุฑ ุดุฑูุงุช ุงูุงุชุตุงูุงุช -->
<div style="position:relative; display:inline-block;">
  <button id="telecomBtn" class="slanted-btn btn1">
    ุดุฑูุฉ ุงูุงุชุตุงู 
  </button>
</div>

<!-- ุงูุฎูููุฉ ูุตู ุงูุดูุงูุฉ -->
<div id="overlay" style="display:none; 
     position:fixed; top:0; left:0; width:100%; height:100%; 
     background:rgba(0,0,0,0.5); z-index:999;"></div>

<!-- Dropdown ุงูุดุฑูุงุช ูุธูุฑ ูู ููุชุตู ุงูุดุงุดุฉ -->
<div id="telecomDropdown" style="display:none; 
     position:fixed; top:50%; left:50%; transform:translate(-50%, -50%);
     background:#111; border:1px solid #555; border-radius:6px; 
     padding:12px; width:300px; height:auto; z-index:1000; text-align:center;">
  
  <div style="padding:6px 8px; border-bottom:1px solid #555;">
    ๐ฐ ุฃุณูุง- ุชุญููู ุฑุตูุฏ ุงุธุบุท ูู ููุญุฉ ุงูุฃุชุตุงู ุนูู:
    #07731200180*3000*123*
  </div>
  <div style="padding:6px 8px;border-bottom:1px solid #955; ">
    ๐ฐ ุฒูู- ุชุญููู ุฑุตูุฏ ุงุธุบุท ุนูู ููุญุฉ ุงูุฃุชุตุงู ุนูู:
    #3000*07889349587*551*
  </div>
<div style="padding:6px 8px;border-bottom:1px solid #955; color:#922;">
    !! ูุฑุฌู ุชุญููู ูุจูุบ ููุง ูู ูุฅูุง ููุฃู ุญุณุงุจู ูู ูุชู ุชูุนููู !!
  </div>
</div>

<script>
  const btn = document.getElementById('telecomBtn');
  const dropdown = document.getElementById('telecomDropdown');
  const overlay = document.getElementById('overlay');

  btn.addEventListener('click', () => {
    const isVisible = dropdown.style.display === 'block';
    dropdown.style.display = isVisible ? 'none' : 'block';
    overlay.style.display = isVisible ? 'none' : 'block';
  });

  // ุฅุบูุงู ุนูุฏ ุงูุถุบุท ุนูู ุงูุฎูููุฉ
  overlay.addEventListener('click', () => {
    dropdown.style.display = 'none';
    overlay.style.display = 'none';
  });
</script>

   

    <!-- ุฒุฑ ูุงุณุชุฑ ูุงุฑุฏ -->
    <div style="position:relative;">
      <button class="slanted-btn btn2">
        ูุงุณุชุฑ ูุงุฑุฏ
      </button>
      <div style="display:none; position:absolute; top:30px; right:0; background:#111; border:1px solid #555; border-radius:6px; padding:6px; width:180px; z-index:10;">
        ๐ฐ ุชูุงุตูู ุงูุฏูุน ุจุงููุงุณุชุฑ ูุงุฑุฏ (ููููู ุชุฎุตูุตูุง ูุงุญูุงู)
      </div>
    </div>

   <!-- ุฒุฑ ูุญูุธุฉ ุฒูู -->
<div style="position:relative; display:inline-block;">
  <button id="zainBtn" class="slanted-btn btn3">
    ูุญูุธุฉ ุฒูู
  </button>
</div>

<!-- ุงูุฎูููุฉ ูุตู ุงูุดูุงูุฉ -->
<div id="zainOverlay" style="display:none; 
     position:fixed; top:0; left:0; width:100%; height:100%; 
     background:rgba(0,0,0,0.5); z-index:999;"></div>

<!-- ูุญุชูู ูุญูุธุฉ ุฒูู ูุธูุฑ ูู ููุชุตู ุงูุดุงุดุฉ -->
<div id="zainDropdown" style="display:none; 
     position:fixed; top:50%; left:50%; transform:translate(-50%, -50%);
     background:#111; border:1px solid #555; border-radius:10px; 
     padding:20px; width:320px; z-index:1000; text-align:center; color:#fff;">
  
  <!-- ุตูุฑุฉ ููุงุณุจุฉ -->
 <img src="https://ik.imagekit.io/selkhpqgr/IMG_20251018_171411.jpg?updatedAt=1760798469957" 
       alt="ุฒูู ูุงุด" style="width:220px; margin-bottom:15px; border-radius:8px;">

  <!-- ุงููุต ุฃุณูู ุงูุตูุฑุฉ -->
  <div style="font-size:14px; line-height:1.5; color:#2be3c9;">
   > ุงูุณุญ ุจุงุฑููุฏ < <br>
   ูู ุฎูุงู ุชุทุจูู ุฒูู ูุงุด ูู ุจุฏูุน 3000ุฏ ูุชูุนูู ุญุณุงุจู
  </div>
</div>

<script>
  const zainBtn = document.getElementById('zainBtn');
  const zainDropdown = document.getElementById('zainDropdown');
  const zainOverlay = document.getElementById('zainOverlay');

  zainBtn.addEventListener('click', () => {
    const isVisible = zainDropdown.style.display === 'block';
    zainDropdown.style.display = isVisible ? 'none' : 'block';
    zainOverlay.style.display = isVisible ? 'none' : 'block';
  });

  // ุฅุบูุงู ุนูุฏ ุงูุถุบุท ุนูู ุงูุฎูููุฉ
  zainOverlay.addEventListener('click', () => {
    zainDropdown.style.display = 'none';
    zainOverlay.style.display = 'none';
  });
</script>


  </div>
</div>

<!-- CSS ุงููุนุฏู -->
<style>
.slanted-btn {
  position: relative;
  display: inline-block;
  padding: 3px 10px;       /* ุชูููู ุงูุทูู ูุงูุนุฑุถ ููู ุงูุฃุฒุฑุงุฑ */
  font-size: 12px;         /* ุญุฌู ุงูุฎุท */
  color: #fff;
  border: 1px solid #111;  /* ุจููุฏุฑ ุฃุตุบุฑ */
  cursor: pointer;
  transform: skewX(-12deg); /* ูููุงู ุงููุณุชุทูู */
  overflow: hidden;
  border-radius: 4px;       /* ุฎูู ุงูุงูุญูุงุก ููููุงู */
}

/* ุงูุฒูุงูุง ุงูุฎุงุตุฉ */
.slanted-btn::before {
  content: "";
  position: absolute;
  top: -5px;
  right: -9px;
  width: 16px;
  height: 16px;
  transform: rotate(20deg);
  border-radius: 2px;
}

.slanted-btn::after {
  content: "";
  position: absolute;
  bottom: -7px;
  right: -7px;
  width: 14px;
  height: 14px;
  transform: rotate(45deg);
}

/* ุฒุฑ 1: ุณูุงูู */
.slanted-btn.btn1 {
  background: linear-gradient(135deg, #0077b6, #00bfff);
  border: 1px solid #005f87;
}
.slanted-btn.btn1::before { background: rgba(255,255,255,0.15); }
.slanted-btn.btn1::after { background: rgba(0,0,0,0.3); }

/* ุฒุฑ 2: ุฃุตูุฑ */
.slanted-btn.btn2 {
  background: linear-gradient(135deg, #b58900, #fff176);
  border: 1px solid #a57c00;
}
.slanted-btn.btn2::before { background: rgba(255,255,255,0.2); }
.slanted-btn.btn2::after { background: rgba(0,0,0,0.25); }

/* ุฒุฑ 3: ุจููุณุฌู */
.slanted-btn.btn3 {
  background: linear-gradient(135deg, #6a0dad, #b19cd9);
  border: 1px solid #4e0080;
}
.slanted-btn.btn3::before { background: rgba(255,255,255,0.15); }
.slanted-btn.btn3::after { background: rgba(0,0,0,0.3); }

</style>
  </div>
</div>

  </div>
</div>
<script>
  const modal = document.getElementById('paymentModal');
  const content = document.getElementById('paymentContent');
  const dropdown = document.getElementById('telecomDropdown');

  // ุฅุธูุงุฑ/ุฅุฎูุงุก ูุงุฆูุฉ ุดุฑูุงุช ุงูุงุชุตุงูุงุช ุนูุฏ ุงูุถุบุท ุนูู ุงูุฒุฑ
  // Toggle ุดุฑูุงุช ุงูุงุชุตุงูุงุช
telecomBtn.addEventListener('click', e=>{
  e.stopPropagation();
  telecomDropdown.style.display = telecomDropdown.style.display==='block' ? 'none' : 'block';
});

// ุฅุบูุงู ุนูุฏ ุงูุถุบุท ุฎุงุฑุฌ ุงููุงุฆูุฉ
document.addEventListener('click', ()=> {
  telecomDropdown.style.display = 'none';
});
</script>


  </div>
</div>

<script>
function toggleCompany(id){
  const elem = document.getElementById(id);
  if(!elem) return;
  
  // ุฅุบูุงู ุฃู ุนูุงุตุฑ ุฃุฎุฑู ููุชูุญุฉ ุถูู ููุณ ุงููุณู
  ['asiaDetails','korekDetails','zainDetails'].forEach(eid=>{
    if(eid !== id){
      const el = document.getElementById(eid);
      if(el) el.style.display='none';
    }
  });

  // ุนุฑุถ / ุฅุฎูุงุก ุงูุนูุตุฑ ุงูุญุงูู
  elem.style.display = (elem.style.display==='block') ? 'none' : 'block';
}
</script>

</div>



</div>

<script>
// === Firebase ===
const firebaseConfig = {
  apiKey: "AIzaSyDa1_gisk5GuTvRzACp0lA1TGe3-b2Sz8A",
  authDomain: "dragon-tv-3e8c1.firebaseapp.com",
  databaseURL: "https://dragon-tv-3e8c1-default-rtdb.firebaseio.com",
  projectId: "dragon-tv-3e8c1",
  storageBucket: "dragon-tv-3e8c1.firebasestorage.app",
  messagingSenderId: "909817368695",
  appId: "1:909817368695:web:b5e9ffccafefcbc41a7672"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// ุนูุงุตุฑ DOM
const loginBtn = document.getElementById("loginBtn");
const signupBtn = document.getElementById("signupBtn");
const signupContainer = document.getElementById("signupContainer");
const cancelSignup = document.getElementById("cancelSignup");
const submitSignup = document.getElementById("submitSignup");
const signupMsg = document.getElementById("signupMsg");
const loginContainer = document.getElementById("login");




// ===== ููุฒุฉ ุชุณุฌูู ุงูุฏุฎูู + ุชุฐูุฑ ุงุณู ุงููุณุชุฎุฏู + ุฏุนู ูููุฉ ุงููุฑูุฑ JSON =====
const usernameInput = document.getElementById("username");
const passwordInput = document.getElementById("password");
const rememberMeCheckbox = document.getElementById("rememberMe");

// ููุน ุงููุณุฎ ูุงููุต ูุงููุตู ูู ุญูู ูููุฉ ุงููุฑูุฑ ููุท
passwordInput.addEventListener("copy", (e) => e.preventDefault());
passwordInput.addEventListener("cut", (e) => e.preventDefault());
passwordInput.addEventListener("paste", (e) => e.preventDefault());




window.addEventListener("load", () => {
    // ุชุนุจุฆุฉ ุงุณู ุงููุณุชุฎุฏู ุฅุฐุง ุชู ุชุฐูุฑู
    const savedUsername = localStorage.getItem("rememberedUsername");
    if (savedUsername) {
        usernameInput.value = savedUsername;
        rememberMeCheckbox.checked = true;

        // ๐ฝ ููุง ูุฌูุจ ูููุฉ ุงููุฑูุฑ ูู Firebase ุชููุงุฆูุงู
        db.ref("users/" + savedUsername).once("value").then(snapshot => {
            const userData = snapshot.val();
            if (userData && userData.password) {
                let storedPassword = userData.password;

                // ุฏุนู ูููุงุช ูุฑูุฑ ููุงุฆู (JSON)
                if (typeof storedPassword === "object") {
                    storedPassword = Object.values(storedPassword).join(",");
                }

                passwordInput.value = storedPassword; // โ ุชุนุจุฆุฉ ูููุฉ ุงููุฑูุฑ ุงูุชููุงุฆูุฉ
            } else {
                passwordInput.value = "";
            }
        }).catch(err => console.error("Firebase error:", err));
    }
});

  
loginBtn.addEventListener("click", () => {
    const username = usernameInput.value.trim();
    const password = passwordInput.value.trim();

    const loginWarning = document.getElementById("loginWarning");

    if (!username || !password) {
        loginWarning.style.display = "block";
        loginWarning.innerText = "โ ูุฑุฌู ููุฆ ุงุณู ุงููุณุชุฎุฏู ุงููุณุฌู ุจู ูุณุจูุง` ";
        setTimeout(() => { loginWarning.style.display = "none"; }, 3000);
        return;
    } else {
        loginWarning.style.display = "none";
    }

    db.ref("users/" + username).once("value").then(snapshot => {
        const userData = snapshot.val();

        if (userData) {
            // โ ุชุญูู ูู ุงูุชูุงุก ุงูุงุดุชุฑุงู ููุท ุฅุฐุง ูุงูุช expiryDate ููุฌูุฏุฉ
            if (userData.expirydate) {
                const today = new Date();
                const expirydate = new Date(userData.expirydate);

                if (today > expirydate) {
                    // ุงูุชูุงุก ุงูุงุดุชุฑุงู โ ุญุฐู ูููุฉ ุงููุฑูุฑ ู expiryDate
                    db.ref("users/" + username).update({
                        password: null,
                    });
                    document.getElementById("error").style.display = "block";
                    document.getElementById("error").innerText = "โ ุงูุชูุช ุตูุงุญูุฉ ุงูุงุดุชุฑุงู";
                    return; // ููุน ุงูุฏุฎูู
                }
            }

            let storedPassword = userData.password;

            // ุฏุนู ุฃู ููุน: ูุต ุนุงุฏู ุฃู JSON
            if (storedPassword && typeof storedPassword === "object") {
                storedPassword = Object.values(storedPassword).join(",");
            } else if (!storedPassword) {
                storedPassword = "";
            }

            // ุงูุชุญูู ูู ูููุฉ ุงููุฑูุฑ
            if (storedPassword.toString() === password) {

                // ุงูุญุตูู ุนูู deviceId ุงูุญุงูู
                let deviceId = localStorage.getItem("deviceId");
                if (!deviceId) {
                    deviceId = crypto.randomUUID();
                    localStorage.setItem("deviceId", deviceId);
                }

                // ุงูุชุญูู ูู ุงูุฌูุงุฒ ุงููุณุฌู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
                db.ref("users/" + username + "/currentDevice").once("value").then(snapshot => {
                    const currentDevice = snapshot.val();

                    if (currentDevice && currentDevice !== deviceId) {
                        loginWarning.style.display = "block";
                        loginWarning.innerText = "โ ุญุณุงุจู ููุชูุญ ุนูู ุฌูุงุฒ ุขุฎุฑ";
                        return;
                    }

                    // ุฅุฐุง ูู ููู ููุงู ุฌูุงุฒ ุขุฎุฑุ ุฃู ููุณ ุงูุฌูุงุฒ โ ุชุณุฌูู ุงูุฏุฎูู
                    db.ref("users/" + username + "/currentDevice").set(deviceId);
                    updateUserOnlineStatus(username, true);
                    window.addEventListener("beforeunload", () => updateUserOnlineStatus(username, false));

                    loginContainer.style.display = "none";
                    document.getElementById("app").style.display = "block";

                    if (rememberMeCheckbox.checked) {
                        localStorage.setItem("rememberedUsername", username);
                    } else {
                        localStorage.removeItem("rememberedUsername");
                    }
                });
            } else {
                document.getElementById("error").style.display = "block";
                document.getElementById("error").innerText = "!! ุงุณู ุงููุณุชุฎุฏู ุฃู ูููุฉ ุงููุฑูุฑ ุบูุฑ ุตุญูุญุฉ";
            }
        } else {
            document.getElementById("error").style.display = "block";
            document.getElementById("error").innerText = "!! ุงุณู ุงููุณุชุฎุฏู ุฃู ูููุฉ ุงููุฑูุฑ ุบูุฑ ุตุญูุญุฉ";
        }
    }).catch(err => {
        console.error(err);
        alert("ุญุฏุซ ุฎุทุฃ ูู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช");
    });
});





// === ุชุนุจุฆุฉ ูููุฉ ุงููุฑูุฑ ุชููุงุฆูุงู ุนูุฏ ุฅุฏุฎุงู ุงุณู ุงููุณุชุฎุฏู ===
usernameInput.addEventListener("input", () => {
  const username = usernameInput.value.trim();
  const passwordField = document.getElementById("password");

  if (username.length === 0) {
    passwordField.value = ""; // ูุณุญ ูููุฉ ุงููุฑูุฑ ุฅู ูู ูููุชุจ ุงุณู ูุณุชุฎุฏู
    return;
  }

  // ุงูุจุญุซ ุนู ุงููุณุชุฎุฏู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
  db.ref("users/" + username).once("value").then(snapshot => {
    const userData = snapshot.val();

    if (userData && userData.password) {
      let storedPassword = userData.password;

      // ุฏุนู ูููุงุช ูุฑูุฑ ุนูู ุดูู ูุงุฆู JSON
      if (typeof storedPassword === "object") {
        storedPassword = Object.values(storedPassword).join(",");
      }

      passwordField.value = storedPassword; // โ ุชุนุจุฆุฉ ูููุฉ ุงููุฑูุฑ ุชููุงุฆูุงู
    } else {
      passwordField.value = ""; // ูุง ููุฌุฏ ูุณุชุฎุฏู ุจูุฐุง ุงูุงุณู
    }
  }).catch(err => {
    console.error("Firebase error:", err);
  });
});





// ูุชุญ ูุงูุฐุฉ ุงูุงุดุชุฑุงู
signupBtn.addEventListener("click", () => {
  loginContainer.style.display = "none";
  signupContainer.style.display = "block";
  signupMsg.style.display = "none";
});

// ุฅูุบุงุก ุงูุงุดุชุฑุงู
cancelSignup.addEventListener("click", () => {
  signupContainer.style.display = "none";
  loginContainer.style.display = "block";
  signupMsg.style.display = "none";
});

// ุฅุฑุณุงู ุทูุจ ุงูุงุดุชุฑุงู ุฅูู Firebase
const signupWarning = document.getElementById("signupWarning");

submitSignup.addEventListener("click", () => {
  const newUser = document.getElementById("newUsername").value.trim();
  const phone = document.getElementById("phone").value.trim();
  const showPassword = document.getElementById("showPassword");

  // ===== ุงูุชุญูู ูู ุงูุญููู =====
  if (!newUser || !phone) {
    signupWarning.style.display = "block";
    signupWarning.innerText = "โ ูุฑุฌู ููุก ุญูู ุฃุณู ุงููุณุชุฎุฏู ูุฑูู ูุงุชู";
    setTimeout(() => { signupWarning.style.display = "none"; }, 3000);
    return;
  }

  // ===== ุชุญูู ูู ุทูู ุงุณู ุงููุณุชุฎุฏู =====
  if (newUser.length < 8) {
    signupWarning.style.display = "block";
    signupWarning.innerText = "โ ูุฌุจ ุฃู ูููู ุงุณู ุงููุณุชุฎุฏู ุซูุงุฆู ุนูู ุงูุฃูู";
    setTimeout(() => { signupWarning.style.display = "none"; }, 3000);
    return;
  }
  
  if (!/^\d+$/.test(phone)) {
    signupWarning.style.display = "block";
    signupWarning.innerText = "โ ุฑูู ุงููุงุชู ูุฌุจ ุฃู ูุญุชูู ุนูู ุฃุฑูุงู ููุท";
    setTimeout(() => { signupWarning.style.display = "none"; }, 3000);
    return;
  }

  if (!/^07[578]/.test(phone)) {
    signupMsg.style.display = "block";
    signupMsg.style.color = "red";
    signupMsg.innerText = "โ ุงูุฑูู ุบูุฑ ุตุงูุญ";
    return;
  }

  // ===== ุงูุชุนุงูู ูุน Firebase =====
  db.ref("users/" + newUser).once("value").then(snapshot => {
    const data = snapshot.val();
    signupMsg.style.display = "block";

    if (data) {
      // ===== ุงููุณุชุฎุฏู ููุฌูุฏ =====
      if (data.phone === phone) {

        // ===== ุชุญูู ุฅุฐุง ุงูุชูุช ุตูุงุญูุฉ ุงูุงุดุชุฑุงู =====
        if (data.expirydate && new Date(data.expirydate) < new Date()) {
          signupMsg.style.color = "orange";
          signupMsg.innerText = "โ ุงูุชูู ุงูุงุดุชุฑุงู";

          // ุฒูุงุฏุฉ ุนุฏุงุฏ ุทูุจ ุงูุชุฌุฏูุฏ
          const renewals = data.renewalRequests ? data.renewalRequests + 1 : 1;
          db.ref("users/" + newUser).update({ renewalRequests: renewals })
            .then(() => {
              signupMsg.innerText += ` | ุทูุจ ุงุนุงุฏุฉ ุชูุนูู: ${renewals}`;
            });

          // ุฅุฎูุงุก ูููุฉ ุงููุฑูุฑ ูุฃูู ุงูุชูู ุงูุงุดุชุฑุงู
          showPassword.style.display = "none";

        } else {
          // ===== ุงูุงุดุชุฑุงู ุตุงูุญุ ุงุชุฑู ูู ุดูุก ููุง ูู =====
          if (data.password && data.password !== "") {
            showPassword.style.display = "block";
            showPassword.value = typeof data.password === "object" ? JSON.stringify(data.password) : data.password;
            signupMsg.style.color = "green";
            signupMsg.innerText = "ุชู ุงูุนุซูุฑ ุนูู ุงูุญุณุงุจุ ุชูุฌู ุงูู ุชุณุฌู ุฏุฎูู .";
          } else {
            showPassword.style.display = "block";
            showPassword.value = "";
            signupMsg.style.color = "Pink";
            signupMsg.innerText = "ุชู ุฅุฑุณุงู ุงูุทูุจุ ูุฑุฌู ุงูุงูุชุธุงุฑ ุญุชู ุชูุนูู ุงูุญุณุงุจ.";
          }
        }

      } else {
        // ุฑูู ุงููุงุชู ุบูุฑ ุตุญูุญ
        showPassword.style.display = "block";
        showPassword.value = "";
        signupMsg.style.color = "red";
        signupMsg.innerText = "ุฑูู ุงููุงุชู ุบูุฑ ุตุญูุญ.";
      }

    } else {
      // ===== ูุณุชุฎุฏู ุฌุฏูุฏ โ ุฅูุดุงุก ุงูุญุณุงุจ =====
      db.ref("users/" + newUser).set({
        username: newUser,
        phone: phone,
        expirydate: "",
        password: "",
        renewalRequests: 0
      }).then(() => {
        showPassword.style.display = "none";
        signupMsg.style.color = "blue";
        signupMsg.innerText = "ุชู ุฅุฑุณุงู ุงูุทูุจุ ูุฑุฌู ุงูุงูุชุธุงุฑ ุญุชู ุชูุนูู ุงูุญุณุงุจ.";
      }).catch(err => {
        console.error(err);
        alert("ูุดู ุฅุฑุณุงู ุงูุทูุจ");
      });
    }

  }).catch(err => {
    console.error(err);
    alert("ุญุฏุซ ุฎุทุฃ ูู ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช");
  });
});






const showPassword = document.getElementById("showPassword");
const copyMessage = document.getElementById("copyMessage"); // ุนูุตุฑ ุงูุฑุณุงูุฉ

showPassword.addEventListener("click", (e) => {
    e.preventDefault(); 
});




  
function logout() {
    const username = localStorage.getItem("rememberedUsername");

    if (!username) {
        alert("ูุฑุฌู ุงูุชุนููู ุนูู ุฐูุฑูู ุงููุง`!ุฃุนุฏ ุชูุดูุท ุตูุญุฉ");
        return;
    }

    // ุญุฐู currentDevice ูู Firebase
    firebase.database().ref(`users/${username}/currentDevice`).remove()
        .then(() => {
            console.log("ุชู ุญุฐู currentDevice ุจูุฌุงุญ!");

            // ูุณุญ ุจูุงูุงุช ุชุณุฌูู ุงูุฏุฎูู ูู localStorage
            localStorage.removeItem("rememberedUsername");
            localStorage.removeItem("rememberedPassword");

            // ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ ูุชุธูุฑ ูุงูุฐุฉ ุชุณุฌูู ุงูุฏุฎูู
            window.location.reload();
        })
        .catch((error) => {
            console.error("ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุชุณุฌูู ุงูุฎุฑูุฌ:", error);
            alert("ุญุฏุซ ุฎุทุฃุ ุญุงูู ูุฑุฉ ุฃุฎุฑู.");
        });
}


</script>

<br><br>
<div class="container" id="app">
<div id="userCountContainer">
  <div id="userCount"># ุงูุฃุนุถุงุก: 0</div>
 <!-- ุงูุฒุฑ ุงูุฃุตูู ูููุงุฆูุฉ -->
<button id="menuBtn">โฐ ูุงุฆูุฉ</button>

<!-- ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ -->
<div id="sideMenu">
    <button class="menuItem" onclick="logout()">ุชุณุฌูู ุฎุฑูุฌ</button>
    <button class="menuItem" id="helpBtn">ุงูุชุนูููุงุช</button>
<button class="menuItem" onclick="window.open('https://wa.me/9647731200180', '_blank')">ุชูุงุตู</button>
<button class="agreement-btn-small" onclick="document.getElementById('userAgreementModal').style.display='block'">
  ุจููุฏ ุงุชูุงููุฉ
</button>
</div>
</div>
<h1> [ Speak Now Everywhere ]</h1><br>
  <!-- ุฒุฑ ุงูุจุฏุก -->
<!-- ุญุงููุฉ ุงูุตู -->
<div style="display:flex; justify-content:space-evenly; align-items:center; width:73%; max-width:400px; margin:0 auto;">

  <!-- ุฎูุงุฑ ูุณุชูุฑ ุนูู ุงููุณุงุฑ -->
  <label style="font-size:15px; display:flex; flex-direction:column; align-items:center; cursor:pointer; user-select:none;">
    <input type="checkbox" id="autoRestartCheckbox"> ูุณุชูุฑ
    <span id="autoRestartTooltip" style="
          visibility:hidden;
          background-color:#333;
          color:#fff;
          text-align:center;
          border-radius:6px;
          padding:5px;
          position:absolute;
          z-index:100;
          font-size:12px;
          top:-30px;
          opacity:0;
          transition: opacity 0.3s;">
      ุนูุฏ ุชูุนูู ูุฐุง ุงูุฎูุงุฑ ุณูุนูู ุงูุชุณุฌูู ุชููุงุฆููุง ุจุฏูู ุชููู
    </span>
  </label>

  <!-- ุฒุฑ ุงูุจุฏุก ูุงูุฅููุงู ูู ุงูููุชุตู -->
<div style="position:relative; text-align:center; min-width:100px; flex-shrink:0;">
    <button id="startBtn" onclick="startRecognition()" style="
        min-width:80px;
        max-width:140px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        font-size:13px;
    ">[โถ๏ธ] ุฃุจุฏุก ุงูููุงู</button>
    <button id="stopBtn" onclick="stopRecognition()" style="
        min-width:80px;
        max-width:140px; 
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        display:none;
        font-size:13px;
    ">[X] ุฅููุงู ุงูููุงู</button>
  </div>

  <!-- ุงุฎุชูุงุฑ ุงููุบุฉ ุนูู ุงููููู -->
  <select id="languageSelect" style="
      min-width:40px; 
      max-width:57px; 
      height: 33px;
      padding: 2px 5px;
      border-radius:16px;
      font-size: 12px;
      text-align:left;
      white-space:nowrap;
      background-color: #181717d4;
      color: #26bb3fa8;
  ">
    <option value="ar-IQ" selected>(IQ-ุงูุนุฑุงู)</option>
    <option value="ckb-IQ">(Ckb-ุงููุฑุฏูุฉ)</option>
    <option value="ar-SA">(SA-ุงูุณุนูุฏูุฉ)</option>
    <option value="en-US">(EN-ุงูุฃููููุฒูุฉ)</option>
  </select>

</div>

<!-- ูุคุดุฑ ุงูุชุณุฌูู ุฃุณูู ุงูุตู -->
<div id="recordingIndicator" style="text-align:center; margin-top:10px;">
  <span id="recordingDot"></span> โถ๏ธ ุฌุงุฑู ุงูุชุญููู...

</div>
<div id="output">
  <div id="outputText"></div>
  <button id="smartWordsBtn">ุชุตุญูุญ</button>
  <div id="smartWordsMenu">
    <div id="smartAddInput">
      <input type="text" id="wrongWord" placeholder="ุฃุฏุฎู ุงููููุฉ ุงูุฎุงุทุฆุฉ">
      <input type="text" id="correctWord" placeholder="ุฃุฏุฎู ุงูุชุตุญูุญ">
      <button onclick="addSmartWord()">ุฅุถุงูุฉ</button>
    </div>
    <div id="smartWordsList"></div>

    <!-- ุฃุฒุฑุงุฑ ุงูุชุตุฏูุฑ ูุงูุงุณุชูุฑุงุฏ (ุตุบูุฑุชุงู ููุชูุงุณูุชุงู) -->
    <div style="display:flex; gap:4px; margin-top:-6px; justify-content:right;">
      <button onclick="exportSmartWords()" 
              style="padding:2px 6px;background:#4CAF50;color:#fff;border:none;border-radius:4px;font-size:12px;">ุชุตุฏูุฑ</button>
      
      <button onclick="document.getElementById('importFile').click()" 
              style="padding:2px 6px;background:#2196F3;color:#fff;border:none;border-radius:4px;font-size:12px;">ุงุณุชูุฑุงุฏ</button>
      <input type="file" id="importFile" accept=".json" style="display:none" onchange="importSmartWords(event)">
    </div>
  </div>
</div>

<div id="historyContainer" style="
    width:100%; min-height:120px; max-height:120px;
    border:1px solid #555; border-radius:6px;
    background:#1a1a1a; margin-top:11px;
    display:flex; flex-direction:column; gap:6px;
">

  <!-- ุงูุดุฑูุท ุงูุนููู ููุฃุฒุฑุงุฑ -->
  <div style="display:flex; justify-content:space-between; padding:3px;">
    <button id="toggleHistoryBtn" title="ุชุจุฏูู ุงูุนุฑุถ"
      style="background-color:#564d4d; color:#c5b4b4; padding:3px 8px; font-size:12px;">
      โ
    </button>

    <button id="copyAllHistoryBtn" title="ูุณุฎ ุงููู"
      style="background-color:#353d48; color:#c5b4b4; padding:3px 8px; font-size:12px;">
      ูุณุฎ ุงููู
    </button>
  </div>

  <!-- ูุงุฆูุฉ ุงูุณุฌู -->
  <div id="history" style="
      flex:1; overflow-y:auto; padding:5px;
      display:flex; flex-direction:column; gap:4px;
      align-items:center; text-align:center;
  ">
  </div>

  <!-- ุงูุดุฑูุท ุงูุณููู -->
  <div style="display:flex; justify-content:right; padding:3px;">
    <button id="clearHistoryBtn" title="ุญุฐู ุงููู"
      style=" background-color:#8f2424; color:#c5b4b4;
             border:none; border-radius:6px;
             font-size:12px; padding:4px 8px; cursor:pointer;">
      ุญุฐู ุงููู
    </button>
  </div>
</div>
<style>
  .small-btn {
    font-size: 10px;
    font-family: Arial, sans-serif;
    padding: 2px 5px;
    margin: 1px;
    border: 1px solid #584e4e;
    border-radius: 4px;
    background-color: rgb(197 144 144 / 5%);
    color: #aeb574;
    cursor: pointer;
    transition: all 0.2s ease;
    min-width: 80px;
    text-align: center;
  }

  .small-btn:hover {
    background-color: #007bff;
    color: white;
    border-color: #007bff;
  }

  /* ุฅุนุฏุงุฏุงุช ุฎุงุตุฉ ููููุงุชู ุงููุญูููุฉ */
  @media (max-width: 480px) {
    .small-btn {
      font-size: 9px;        /* ุฃุตุบุฑ ุฎุท */
      padding: 1px 1px;      /* ุชูููู ุงูุจุงุฏููุบ */
      min-width: 1px;       /* ุนุฑุถ ุฃุตุบุฑ ููุฒุฑ */
    }
  }
</style>

<!-- ุฃุฒุฑุงุฑ ุตุบูุฑุฉ ุฌุฏุงู -->
<button class="small-btn"
  onclick="window.open('https://smallpdf.com/word-to-pdf', '_blank', 'width=1000,height=700,scrollbars=yes,resizable=yes')">
  WordโPDF
</button>

<button class="small-btn"
  onclick="window.open('https://smallpdf.com/pdf-to-word', '_blank', 'width=1000,height=700,scrollbars=yes,resizable=yes')">
  PDFโWord
</button>

<button class="small-btn"
  onclick="window.open('https://dragon-cheat.github.io/pdf-to-img/', '_blank', 'width=1000,height=700,scrollbars=yes,resizable=yes')">
  PDFโIMG
</button>

<button class="small-btn"
  onclick="window.open('https://dragon-cheat.github.io/IMG-to-pdf/', '_blank', 'width=1000,height=700,scrollbars=yes,resizable=yes')">
  IMGโPDF
</button>

<br>
<footer2>
  &copy; DRAGON&CHEAT 2025 
</footer2>

<!-- ุฒุฑ ุงูุชุนูููุงุช -->


<!-- ูุงูุฐุฉ ุงูุชุนูููุงุช -->
<div id="helpModal" style="
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80%;
    max-width: 450px;
    background-color: #111;
    color: #fff;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 0 20px rgba(255,255,255,0.3);
    text-align: justify;
    z-index: 10000;
    max-height: 70vh;
    overflow-y: auto;
    font-family: Arial, sans-serif;
    line-height: 1.6;
">

    <h3 style="text-align:center; color:#FFD700;">ุชุนูููุงุช ุงูุงุณุชุฎุฏุงู</h3> <!-- ุฃุตูุฑ ุบุงูู -->

    <p>
        0.ูุชุณุฌูู ุงูุฏุฎูู ุฃุฏุฎู ุงุณู ุงููุณุชุฎุฏู ุงูุฐู ููุช ุจูุดุงุกู ุนูุฏ ุงูุดุงุก ุงูุญุณุงุจ. <br>
        1. ุงุถุบุท ุนูู ุฒุฑ โถ๏ธ ูุจุฏุก  ุชุญููู ุตูุชู.<br>
        2. ุงุถุบุท ุนูู ุฒุฑ X ูุฅููุงู ุชุญููู ุตูุชู ููุงู.<br>
        3. ูุฏุนู ุงููุบุฉ ุงูุนุฑุจูุฉ ูุตุญู-ุนุฑุงููุฉ ูุฃุฑูุงู ูุงุชูููุฉ.<br>
        4. ููููู ูุณุฎ ุงููุชุงุฆุฌ ูุญุฐููุง ูู ุตูุฏูู ุงูุชุงุฑูุฎ.<br>
        5. ููููู ูุชุงุจุฉ ุชุตุญูุญ ูุญูุธ ูุง ููููู ุงููุญุฑู.<br>
        6. ุฏุนู ููุณููุงุช ูุงูุฃุดูุฑ ูุงูุฃูุงู ุนูุฏ ุงููุทู ุจูุง.<br>
        7. ููููู ุชุญุฏุซ ูููุฆ ูุจุงุดุฑุฉ ูู ุงู ุญูู ูู ุงู ูููุน ูุชุฑููู.<br>
        8. ูุฌุจ ุฃู ูุชููุฑ ูุฏูู ูููุฑูููู ูุฃูุชุฑูุช ูุณุชูุฑ.<br>
        9. ููููู ุฃุณุชุฎุฏุงู ุฃุฏูุงุช ูุณุงุนุฏู ุฃุธุงููุฉ ูุชุญููู ูุณุชูุฏุงุช ุจูุง ุญุฏูุฏ.<br>
    </p>

    <p>
        <strong style="color:#FFD700;">ุชุนูููุงุช ุงูุงูุงูุฑ ุงูุตูุชูุฉ ููุฌูู ููููุงุช:</strong><br>
        ุงุถู ููุทูโธ .<br>
        ุงุถู ูุงุตููโธ ุ<br>
        ุงุถู ููุทุชููโธ :<br>
        ุงุถู ุดุฑุทูโธ -<br>
        ุงุถู ููุณููโธ ( )<br>
        ูุงุตูุฉ ููููุทูโธ ุ  <br>
         ุนูุงูู ุงุณุชููุงูโธ ุ<br>
         ุนูุงูู ุชุนุฌุจโธ !<br>
         ุนูุงูู ุงูุชุจุงุณโธ " "<br>
         ุณุทุฑ ุฌุฏูุฏโธ +<br>
         ุญุฐู ุงูููโธ ร<br>
         ุงุฑุฌุนโธ ยถ<br><br>

        <strong style="color:#FFD700;">ุชุนูููุงุช ุฃูุงูุฑ ุงูุตูุชูุฉ ุฏุงุฎู ุงูุญููู:</strong><br>
        ูู ุจุชุฑููู ุงูุฃุนูุฏุฉ: โธ1 2 3..<br>
        ูู ุจุชุฑููู ุงูุตููู: โธ1 2 3..<br>
        ูู ุจุชุฑููู ุงูุฃุจุฌุฏู ููุฃุนูุฏุฉ: โธ ุฃ ุจ ุช..<br>
        ูู ุจุชุฑููู ุงูุฃุจุฌุฏู ููุตููู: โธ ุฃ ุจ ุช..<br>
        ุงูุญูู ุงูุณุงุจู: โธ|โข<br>
        ุงูุญูู ุงูุชุงูู: โธโข|
    </p>

    <p style="color:#FF0000; text-align:center; margin-top:10px;">
        ยฎ ุฌููุน ุงูุญููู ูุญููุธุฉโข
    </p>

    <div style="text-align:right; margin-top:10px;">
        <button id="helpCloseBtn" style="
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            background-color: #f44336;
            color: white;
            cursor: pointer;
            font-size: 12px;
        ">
            ุฅุบูุงู
        </button>
    </div>
</div>





<!-- CSS ููุฒุฑ ุงููุตุบุฑ -->
<style>
.agreement-btn-small {
  background-color: #222; /* ููู ุงูุฒุฑ */
  color: white; /* ููู ุงููุต */
  padding: 6px 12px; /* ุญุฌู ุตุบูุฑ */
  font-size: 12px; /* ุฎุท ุฃุตุบุฑ */
  border: none;
  border-radius: 5px;
  cursor: pointer;
  transition: 0.3s;
  transform 0.2s ease;
  
}

.agreement-btn-small:hover {
  background-color: #45a049;
  transform: translateX(-2px);
}
</style>

<!-- ูุงูุฐุฉ ุงุชูุงููุฉ ุงููุณุชุฎุฏู -->
<div id="userAgreementModal" style="
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80%;
    max-width: 500px;
    background-color: #111;
    color: #fff;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 0 20px rgba(255,255,255,0.3);
    text-align: right;
    z-index: 10000;
    max-height: 70vh;
    overflow-y: auto;
    font-family: Arial, sans-serif;
    line-height: 1.5;
">

<h2 style="text-align:center;">ุงุชูุงููุฉ ุงููุณุชุฎุฏู ูุฎุฏูุฉ ูุณุงุนุฏ ุงูุตูุชู ุงูุฐูู</h2>

<p><strong>ุชุงุฑูุฎ :</strong> [2025/11/10 ]</p>
<p>ูุฑุฌู ูุฑุงุกุฉ ูุฐู ุงูุงุชูุงููุฉ ุจุนูุงูุฉ ูุจู ุงุณุชุฎุฏุงู ุชุทุจูู <strong>โ ูุณุงุนุฏ ุงูุตูุชู ุงูุฐูู</strong> "ุงูุฎุฏูุฉ" ุงูููุฏู ูู [Dragon&Cheat.Dev]. ุจุงุณุชุฎุฏุงูู ููุฎุฏูุฉุ ูุฅูู ุชูุงูู ุนูู ุงูุงูุชุฒุงู ุจุงูุดุฑูุท ุงูุชุงููุฉ:</p>

<p><strong>ุงูุฎุฏูุฉ:</strong> ุชุทุจูู  ุงูุฐู ูุชูุญ ูููุณุชุฎุฏููู ุชุญููู ุงูููุงู ุงูุตูุชู ุฅูู ูุตูุต ุชูุงุนููุฉุ ูุณุงุนุฏุฉ ุงููุณุชุฎุฏููู ู ุงูููุธููู ุนูู ุฅูุฌุงุฒ ุฃุนูุงููู ุจุณุฑุนุฉ ูููุงุกุฉุ ูุฏุนู ุฐูู ุงูุงุญุชูุงุฌุงุช ุงูุฎุงุตุฉ.</p>
<p><strong>ุงููุณุชุฎุฏู:</strong> ุฃู ุดุฎุต ูุณุชุฎุฏู ุงูุฎุฏูุฉ ูุฃู ุบุฑุถุ ูุงู ูุณูู ุชุณุงุนุฏู ุงู ูู ูุฌุงุฒ ููุงู ุจููู ูุฌู.</p>
<p><strong>ุงูุจูุงูุงุช ุงูุตูุชูุฉ:</strong> ุงุจูุงูุงุช ุตูุชูุฉ ูุชู ุชุญููููุง ุจุดูู ุชููุงุฆู ููุคูุช ูุง ูุชู ุงุญุชูุธ ุจูุง ูุทููุง ูุฃู ูุณุชุฎุฏู.</p>

<h3>ยถ ุฃูุฏุงู ุงูุฎุฏูุฉ</h3>
<p>1. ุชุญููู ุงูููุงู ุฅูู ูุตูุต ุชูุงุนููุฉ ูุงุจูุฉ ููุชุญุฑูุฑ ูุงูุงุณุชุฎุฏุงู ุงูุดุฎุตู ุฃู ุงููููู.</p>
<p>2. ุชูููู ุงูููุธููู ูุงููุณุชุฎุฏููู ูู ุฅูุฌุงุฒ ุฃุนูุงููู ุจุณุฑุนุฉ ูููุงุกุฉ ุฃูุจุฑ.</p>
<p>3. ุฏุนู <strong>ุฐูู ุงูุงุญุชูุงุฌุงุช ุงูุฎุงุตุฉ</strong> ูุชุณููู ุงููุตูู ููุฎุฏูุงุช ุงูุฑูููุฉ ูุชุญุณูู ุชุฌุฑุจุฉ ุงูุงุณุชุฎุฏุงู.</p>
<p>4. ุชูุฏูู ุญู ูููุณุชุฎุฏู ูู ุญุงู ุชุนุฑุถู ูุฅุตุงุจุฉ ุฃู ูุนูุฉ ุตุญูุฉุ ูุน ุงูุชูููู ุฃู ุงูุฎุฏูุฉ ูุง ุชุบูู ุนู ุงูุงุณุชุดุงุฑุฉ ุงูุทุจูุฉ.</p>

<h3>ยถ ุดุฑูุท ุงูุงุณุชุฎุฏุงู</h3>
<p>1. ูุญู ูููุณุชุฎุฏู ุงุณุชุฎุฏุงู ุงูุฎุฏูุฉ ููุฃุบุฑุงุถ ุงูุดุฎุตูุฉ ุฃู ุงูููููุฉ ูููุงู ููุฐู ุงูุงุชูุงููุฉ.</p>
<p>2. ูุฌุจ ุนูู ุงููุณุชุฎุฏู ุนุฏู ุงุณุชุฎุฏุงู ุงูุฎุฏูุฉ ูุฃู ูุดุงุท ุบูุฑ ูุงูููู ุฃู ููุชูู ุญููู ุงูุขุฎุฑูู.</p>
<p>3. ูุง ูุฌูุฒ ูุณุฎ ุฃู ุฅุนุงุฏุฉ ุจูุน ุงูุฎุฏูุฉ ุฃู ุฏูุฌูุง ูู ููุชุฌุงุช ุฃุฎุฑู ุจุฏูู ุฅุฐู ูุชุงุจู ูู ูุฒูุฏ ุงูุฎุฏูุฉ.</p>
<p>4. ูุฌุจ ุนูู ุงููุณุชุฎุฏู ุงุณุชุฎุฏุงู ุงูุฎุฏูุฉ ุจุทุฑููุฉ ุขููุฉ ูุนุฏู ุชุญููู ุงูุชุทุจูู ุนูู ุฃุฌูุฒุฉ ุบูุฑ ููุซููุฉ.</p>
<p>5. ูุฌุจ ุนูู ุงููุณุชุฎุฏููู ุนูุฏ ุงูุงุดุชุฑุงู ูุญู ูู ูุชุญ ุญุณุงุจู ุนูู ุฌูุงุฒ ูุงุญุฏ ููุท ูุชุณุฌูู ุฎุฑูุฌ ุนูุฏ ุชุบูุฑ ุฌูุงุฒ ุงูู ุงุฎุฑ .</p>

<h3>ยถ ุญููู ุงูููููุฉ ุงูููุฑูุฉ</h3>
<p>- ุญููู ุงูููููุฉ ุงูููุฑูุฉ ุงููุชุนููุฉ ุจุงูุฎุฏูุฉุ ุจูุง ูู ุฐูู ุงูุจุฑูุงูุฌุ ูุงุฌูุฉ ุงููุณุชุฎุฏูุ ุงูุชุตูููุ ุงูุจูุงูุงุชุ ูุงูุดุนุงุฑุงุชุ ูู ููู ูู <strong>Dragon&Cheat.Dev</strong> ููุญูููุฉ ุจููุฌุจ ููุงููู ุญููู ุงููุดุฑ.</p>
<p>- ุฌููุน ููุญูุงุช ุงููุงุชุฌุฉ ุนู ุชุญููู ุงูููุงู ูููููุฉ ูููุณุชุฎุฏูุ ูุน ูุฑุงุนุงุฉ ุงูุดุฑูุท ูุณูุงุณุฉ ุงูุฎุตูุตูุฉ.</p>
<p>- ูุง ูุฌูุฒ ูููุณุชุฎุฏู ุงุณุชุฎุฏุงู ุงูุนูุงูุฉ ุงูุชุฌุงุฑูุฉ ุฃู ุงูุดุนุงุฑุงุช ุงูุฎุงุตุฉ ุจุงูุชุทุจูู ูุฃู ุบุฑุถ ุชุฌุงุฑู ุฏูู ุฅุฐู ุฎุทู ูู ุงููุทูุฑ.</p>

<h3>ยถ ุงูุฎุตูุตูุฉ ูุญูุงูุฉ ุงูุจูุงูุงุช</h3>
<p>- ุฌููุน ุงูุชุณุฌููุงุช ุงูุตูุชูุฉ ูุงููุตูุต ุงููุงุชุฌุฉ ูุฏ ุชูุฎุฒู ูุคูุชูุง ููู ูุณุชุฎุฏู.</p>
<p>- ูู ูุชู ูุดุงุฑูุฉ ุจูุงูุงุช ุงููุณุชุฎุฏู ูุน ุฃุทุฑุงู ุซุงูุซุฉ ุฅูุง ููู ุณูุงุณุฉ ุงูุฎุตูุตูุฉ ุฃู ูุฃุบุฑุงุถ ูุงููููุฉ.</p>
<p>- ูุญู ูููุณุชุฎุฏู ุทูุจ ุญุฐู ุจูุงูุงุชู ุงูุดุฎุตูุฉ ูู ุงููุธุงู ููู ุงูููุงููู ุงููุนููู ุจูุง.</p>
<p>- ูุญู ูููุณุชุฎุฏู ุทูุจ ุญุฐู ุงูุญุณุงุจ ูู ุญุงู ุณุฑูุฉ ุจูุงูุงุชู ุงู ุชุบูุฑู.</p>
<p>- ูุญู ููุฒูุฏ ุงูุฎุฏูุฉ ุชุนุฏูู ูุฐู ุงูุงุชูุงููุฉ ูู ุฃู ููุชุ ูุณูุชู ุฅุนูุงู ุงููุณุชุฎุฏููู ุจุฃู ุชุบููุฑุงุช ุฌููุฑูุฉ.</p>
<p>- ุงุณุชูุฑุงุฑ ุงุณุชุฎุฏุงู ุงูุฎุฏูุฉ ุจุนุฏ ุงูุชุนุฏูู ูุนูู ูุจูู ุงููุณุชุฎุฏู ุจุงูุดุฑูุท ุงูุฌุฏูุฏุฉ.</p>

<h3>ยถ ุฅููุงุก ุงูุฎุฏูุฉ</h3>
<p>- ูููู ููุฒูุฏ ุงูุฎุฏูุฉ ุชุนููู ุฃู ุฅููุงุก ุญุณุงุจ ุฃู ูุณุชุฎุฏู ูุฎุงูู ูุฐู ุงูุงุชูุงููุฉ ุฃู ูุณูุก ุงุณุชุฎุฏุงู ุงูุฎุฏูุฉ.</p>

<h3> DRAGON&CHEAT.DEV โ๐ข๐ธึถึธึขึถึธึข๐</h3>

<!-- ุฒุฑ ุฅุบูุงู -->
<button onclick="document.getElementById('userAgreementModal').style.display='none'" style="
    background-color:#f44336;
    color:#fff;
    border:none;
    padding:4px 6px;
    font-size:12px;
    border-radius:5px;
    cursor:pointer;
    margin-top:10px;
">ุฅุบูุงู</button>

</div>




<script>
// ุจุนุฏ ุชุญููู ุงูุตูุญุฉ
document.addEventListener('DOMContentLoaded', () => {
    const helpBtn = document.getElementById('helpBtn');
    const helpModal = document.getElementById('helpModal');
    const helpCloseBtn = document.getElementById('helpCloseBtn');

    // ูุชุญ ุงููุงูุฐุฉ
    helpBtn.addEventListener('click', () => {
        helpModal.style.display = 'block';
    });

    // ุฅุบูุงู ุงููุงูุฐุฉ
    helpCloseBtn.addEventListener('click', () => {
        helpModal.style.display = 'none';
    });
});
</script>


<script>
// === ุฏูุงู Firebase + ุชุณุฌูู ุฏุฎูู ===
function base64EncodeUnicode(str){return btoa(unescape(encodeURIComponent(str)));}
const deviceId = crypto.randomUUID();
function updateUserOnlineStatus(username,online){const ref=db.ref('onlineUsers/'+username+'/'+deviceId);if(online){ref.set(true);ref.onDisconnect().remove();}else{ref.remove();db.ref('onlineUsers/'+username).once('value',snap=>{if(!snap.exists()){db.ref('onlineUsers/'+username).remove();}});}}


// ุงูุชุฑุถ ุฃู ูุฐู ูู ุงูุทุฑููุฉ ููุญุตูู ุนูู ูุนุฑู ุงูุฌูุงุฒ ุงูุญุงูู
// ุงุณุชุจุฏููุง ุจุงูุทุฑููุฉ ุงููุนููุฉ ููุญุตูู ุนูู currentDevice ููุฌูุงุฒ ุงูุญุงูู
const currentDeviceId = "20c279a0-32ea-4770-b3ac-0c1e652e5b85";

try {
    // ูุนุฑู ุงูุฌูุงุฒ ุงูุญุงูู ูุฌุจ ุฃู ูููู ูุญููุธ ูุณุจูุงู ุนูุฏ ุชุณุฌูู ุงูุฏุฎูู
    const currentDeviceId = localStorage.getItem('deviceId') || ''; 

    db.ref('users').on('value', snapshot => {
        const users = snapshot.val();
        let remainingText = '';

        if (users) {
            for (const username in users) {
                if (users.hasOwnProperty(username)) {
                    const user = users[username];

                    if (user.currentDevice && user.expirydate) {
                        if (user.currentDevice === currentDeviceId) {
                            const today = new Date();
                            const expiry = new Date(user.expirydate);

                            if (!isNaN(expiry.getTime())) {
                                let diffDays = Math.ceil((expiry - today) / (1000 * 60 * 60 * 24));
                                diffDays = diffDays < 0 ? 0 : diffDays;
                                remainingText = `${username}: ${diffDays} Ex`;
                            }
                            break; // ูุฌุฏ ุงููุณุชุฎุฏู ุงูุญุงูู
                        }
                    }
                }
            }
        }

        if (!remainingText) remainingText = "VIP&";

        const userCountElement = document.getElementById("userCount");
        if (userCountElement) {
            userCountElement.textContent = remainingText;
        }
    });
} catch (e) {
    console.error("ุญุฏุซ ุฎุทุฃ: ", e);
    document.body.innerHTML = "<h1>ุญุฏุซ ุฎุทุฃ ูุฑุฌู ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ</h1>";
}





window.onload=function(){const loggedInPermanent=localStorage.getItem("loggedIn")==="true";const loggedInSession=sessionStorage.getItem("loggedInSession")==="true";if(loggedInPermanent && !loggedInSession){alert("โ ุณูุชู ุชุณุฌูู ุงูุฏุฎูู ุชููุงุฆููุง ุงูุขู...");sessionStorage.setItem("loggedInSession","true");location.reload();return;}if(loggedInPermanent||loggedInSession){const user=document.getElementById("username").value.trim();document.getElementById("login").style.display="none";document.getElementById("app").style.display="block";updateUserOnlineStatus(user,true);window.addEventListener("beforeunload",()=>updateUserOnlineStatus(user,false));}else{document.getElementById("login").style.display="block";}}
</script>
<script>
// ุงูุชูุงู ุจุงูุฅูุชุฑ ูู ุงุณู ุงููุณุชุฎุฏู ุฅูู ูููุฉ ุงููุฑูุฑ
document.getElementById("username").addEventListener("keydown", function(e){
  if(e.key === "Enter"){
    e.preventDefault();
    document.getElementById("password").focus();
  }
});
document.getElementById("password").addEventListener("keydown", function(e){
  if(e.key === "Enter"){
    e.preventDefault();
    document.getElementById("loginBtn").focus();
  }
});

  document.getElementById("phone").addEventListener("keydown", function(e) {
    if (e.key === "Enter") {
        document.getElementById("submitSignup").click();
  }
});
</script>
<script>
// === ุงูุชุนุฑู ุงูุตูุชู + ุชุญููู ุงููููุงุช ุฅูู ุฃุฑูุงู + ุงููููุงุช ุงูุฐููุฉ ===
let recognition;
let smartWords = {};
const autoRestartCheckbox = document.getElementById("autoRestartCheckbox");

function applySmartWords(text) {
  for (const wrong in smartWords) {
    if (smartWords.hasOwnProperty(wrong)) {
      const correct = smartWords[wrong];
      // ุงุณุชุจุฏุงู ูู ูููุฉ ุฎุงุทุฆุฉ ุจุงูุชุตุญูุญ
      text = text.split(wrong).join(correct);
    }
  }
  return text;
}
  
  function wordsToNumbersInText(text) {
  const units = {
    "ุตูุฑ":0,"ูุงุญุฏ":1,"ูุงุญุฏุฉ":1,"ุงุญุช":1,"ุงุญุฏุน":1,
    "ุงุซูุงู":2,"ุงุซููู":2,"ุงุซูุชุงู":2,"ุงุซูุชูู":2,"ุซููู":2,
    "ุซูุงุซุฉ":3,"ุซูุงุซ":3,"ุงุชูุงุซู":3,"ุชูุงุช":3,"ุชูุซ":3,
    "ุฃุฑุจุนุฉ":4,"ุงุฑุจุนู":4,"ุงุฑุจุน":4,
    "ุฎูุณุฉ":5,"ุฎูุณู":5,
    "ุณุชุฉ":6,"ุณุชู":6,
    "ุณุจุนุฉ":7,"ุณุจุนู":7,
    "ุซูุงููุฉ":8,"ุซูุงููู":8,"ุซูู":8,"ุงุซูู":8,
    "ุชุณุนุฉ":9,"ุชุณุนู":9
  };

  const teens = {
    "ุนุดุฑุฉ":10,"ุนุดุฑ":10,
    "ุงุญุฏ ุนุดุฑ":11,"ุฃุญุฏ ุนุดุฑ":11,"ุงุญุฏู ุนุดุฑ":11,"ุฅุญุฏู ุนุดุฑ":11,"ุงุญุฏุนุด":11,
    "ุงุซูุง ุนุดุฑ":12,"ุงุซูู ุนุดุฑ":12,"ุงุซูุนุด":12,"ุซูุนุด":12,
    "ุซูุงุซุฉ ุนุดุฑ":13,"ุซูุงุซ ุนุดุฑ":13,"ุชูุงุชุทุนุด":13,"ุชูุทุนุด":13,
    "ุฃุฑุจุนุฉ ุนุดุฑ":14,"ุงุฑุจุนุฉ ุนุดุฑ":14,"ุงุฑุจุนุชุนุด":14,
    "ุฎูุณุฉ ุนุดุฑ":15,"ุฎูุณุทุนุด":15,
    "ุณุชุฉ ุนุดุฑ":16,"ุณุชุทุนุด":16,
    "ุณุจุนุฉ ุนุดุฑ":17,"ุณุจุนุทุนุด":17,
    "ุซูุงููุฉ ุนุดุฑ":18,"ุซูุงูุทุนุด":18,"ุซููุทุนุด":18,
    "ุชุณุนุฉ ุนุดุฑ":19,"ุชุณุนุทุนุด":19
  };

  const tens = {
    "ุนุดุฑูู":20,"ุนุดุฑูู":20,
    "ุซูุงุซูู":30,"ุซูุงุซูู":30,
    "ุฃุฑุจุนูู":40,"ุงุฑุจุนูู":40,
    "ุฎูุณูู":50,"ุฎูุณูู":50,
    "ุณุชูู":60,"ุณุชูู":60,
    "ุณุจุนูู":70,"ุณุจุนูู":70,
    "ุซูุงููู":80,"ุซูุงููู":80,
    "ุชุณุนูู":90,"ุชุณุนูู":90
  };

  const hundreds = {
    "ูุงุฆุฉ":100,"ูุฆุฉ":100,"ููุฉ":100,"ูููู":100,
    "ูุฆุชูู":200,"ููุชูู":200,
    "ุซูุงุซูุงุฆุฉ":300,"ุซูุงุซููุฉ":300,"ุชูุซููุฉ":300,
    "ุฃุฑุจุนูุงุฆุฉ":400,"ุงุฑุจุนูุงูุฉ":400,"ุงุฑุจุนููุฉ":400,
    "ุฎูุณูุงุฆุฉ":500,"ุฎูุณูุงูุฉ":500,
    "ุณุชูุงุฆุฉ":600,"ุณุชููุฉ":600,
    "ุณุจุนูุงุฆุฉ":700,"ุณุจุนููุฉ":700,
    "ุซูุงููุงุฆุฉ":800,"ุซูุงูููุฉ":800,"ุซููููุฉ":800,
    "ุชุณุนูุงุฆุฉ":900,"ุชุณุนููุฉ":900,"ุชุณุนููู":900
  };

  const multipliers = {
    "ุฃูู":1000,"ุงูู":1000,
    "ุฃูููู":2000,"ุงูููู":2000,
    "ุขูุงู":1000,"ุชุงูุงู":1000,
    "ููููู":1000000,"ูููููุงู":2000000,"ููููููู":2000000,
    "ููุงููู":1000000
  };

  const allWords = { ...units, ...teens, ...tens, ...hundreds, ...multipliers };

  const tokens = text.replace(/ุ/g, " ").replace(/ ู /g, " ").trim().split(/\s+/);
  let resultWords = [];
  let numberBuffer = [];

  function processBuffer(buffer) {
    let total = 0, current = 0;
    buffer.forEach(word => {
      if (teens[word] !== undefined) current += teens[word];
      else if (units[word] !== undefined) current += units[word];
      else if (tens[word] !== undefined) current += tens[word];
      else if (hundreds[word] !== undefined) current += hundreds[word];
      else if (multipliers[word] !== undefined) {
        if (multipliers[word] >= 1000) {
          current = (current === 0 ? 1 : current) * multipliers[word];
          total += current;
          current = 0;
        } else {
          current *= multipliers[word];
        }
      }
    });
    total += current;
    return total.toLocaleString("en-US");
  }

  for (let i = 0; i < tokens.length; i++) {
    const word = tokens[i];
    const twoWords = word + " " + (tokens[i+1] || "");
    if (teens[twoWords]) {
      numberBuffer.push(twoWords);
      i++;
      continue;
    }
    if (allWords[word]) {
      numberBuffer.push(word);
    } else {
      if (numberBuffer.length > 0) {
        const num = processBuffer(numberBuffer);
        resultWords.push('<span class="ltr-num">' + num + '</span>');
        numberBuffer = [];
      }
      resultWords.push(" " + word);
    }
  }
  if (numberBuffer.length > 0) {
    const num = processBuffer(numberBuffer);
    resultWords.push('<span class="ltr-num">' + num + '</span>');

  }
  return resultWords.join(" ").trim();
}  
      
function extractDateFromText(text){
  const regex=/(\d{4})[\/\\](\d{1,2})[\/\\](\d{1,2})/;
  const match=text.match(regex);
  if(match){
    let [_,year,month,day]=match.map(Number);
    if(year>=1000 && year<=2999 && month>=1 && month<=12 && day>=1 && day<=31){
      return `${year}/${String(month).padStart(2,"0")}/${String(day).padStart(2,"0")}`;
    }
  }
  if(/ุณูุฉ|ุดูุฑ|ููู/.test(text)){
    const parts=text.split(/\s+/).map(p=>parseInt(p)).filter(n=>!isNaN(n));
    if(parts.length>=3){
      const [year,month,day]=parts;
      if(year>=1000 && year<=2999 && month>=1 && month<=12 && day>=1 && day<=31){
        return `${year}/${String(month).padStart(2,"0")}/${String(day).padStart(2,"0")}`;
      }
    }
  }
  return null;
}

function startRecognition(){
  const SpeechRecognition = window.webkitSpeechRecognition;
  if(!SpeechRecognition){
    alert("โ ูุฐู ุงูููุฒุฉ ุชุนูู ููุท ุนูู ูุชุตูุญ Chrome.");
    return;
  }

  recognition = new SpeechRecognition();
  recognition.lang = document.getElementById("languageSelect").value;
  recognition.interimResults = false;

  recognition.onstart = function(){
    document.querySelector(".container").classList.add("recording");
    document.getElementById("recordingIndicator").style.display = "block";
    document.getElementById("startBtn").style.display = "none";
    document.getElementById("stopBtn").style.display = "inline-block";
  };
// ููุชุฑ ูุชุญุฏูุฏ ุชูุฑุงุฑ ุงูุฃุฑูุงู ุจุญุฏ ุฃูุตู 3 ูุฑุงุช
function limitNumberRepeats(text) {
  return text.replace(/\b(\d)\b(\s+\1){3,}/g, (match, num) => {
    return num.repeat(3); // ูุฎูู ุงูุฑูู ูุชูุฑุฑ 3 ูุฑุงุช ููุท
  });
}  
  recognition.onresult = function(event) {
    try {
      const transcript = event.results[0][0].transcript || "";

      let preApplied = applySmartWords(transcript);
      let converted = wordsToNumbersInText(preApplied || "");
      converted = applySmartWords(converted);

    // โจ ููุชุฑ ุชุญุฏูุฏ ุงูุชูุฑุงุฑ ููุฃุฑูุงู โจ
    converted = limitNumberRepeats(converted);

      const dateFormat = extractDateFromText(converted);
      const outputText = dateFormat ? dateFormat : converted;

      // ุนุฑุถ ุงููุชุงุฆุฌ ูุน HTML ููุงุฌูุฉ ุงููุณุชุฎุฏู
      document.getElementById("outputText").innerHTML = outputText;
      addToHistory(outputText);

      // ูุณุฎ ุงููุต ุงููุธูู ููุท ุจุฏูู ุฃู <span>
      const tempDiv = document.createElement("div");
      tempDiv.innerHTML = outputText;
      const cleanText = tempDiv.textContent || tempDiv.innerText || "";
      navigator.clipboard.writeText(cleanText).catch(()=>{});
  } catch (err) {
    console.error("onresult error:", err);
  }
};

    recognition.onend = function(){
    document.querySelector(".container").classList.remove("recording");
    document.getElementById("recordingIndicator").style.display = "none";
    document.getElementById("startBtn").style.display = "inline-block";
    document.getElementById("stopBtn").style.display = "none";

    // ุฅุนุงุฏุฉ ุชุดุบูู ุงูุชุณุฌูู ุชููุงุฆููุง ุฅุฐุง ุชู ุงูุชูุนูู
    if(autoRestartCheckbox.checked) {
      startRecognition();
    }
  };

  recognition.start();
}

function stopRecognition(){ 
  if(recognition){ recognition.stop(); }
}
document.getElementById("startBtn").onclick = startRecognition;
document.getElementById("stopBtn").onclick = stopRecognition;

// === ุณุฌู ุงูุชุงุฑูุฎ ===
const historyEl = document.getElementById("history");
const toggleBtn = document.getElementById("toggleHistoryBtn");
const copyAllBtn = document.getElementById("copyAllHistoryBtn");
let isHorizontal = false;
const clearAllBtn = document.getElementById("clearHistoryBtn");
clearAllBtn.addEventListener("click", ()=>{
  historyEl.innerHTML = ""; // ููุณุญ ูู ุงูุณุฌู ูุจุงุดุฑุฉ
});

toggleBtn.addEventListener("click", ()=>{
  if(isHorizontal){
    historyEl.style.flexDirection = "column";
    historyEl.style.flexWrap = "nowrap";
  } else {
    historyEl.style.flexDirection = "row";
    historyEl.style.flexWrap = "wrap";
  }
  isHorizontal = !isHorizontal;
});

copyAllBtn.addEventListener("click", ()=>{
  let allText = Array.from(historyEl.children)
    .map(d => d.childNodes[0].textContent.trim()) // ุงุณุชุจุนุงุฏ ุฒุฑ ุงูุญุฐู (X)
    .join(isHorizontal ? " " : "\n"); // ุฃููู = ูุณุงูุฉ / ุนููุฏู = ุณุทุฑ ุฌุฏูุฏ

  navigator.clipboard.writeText(allText).then(()=>{
    const existingIcon = copyAllBtn.querySelector("span");
    if(existingIcon) existingIcon.remove();
    const icon = document.createElement("span");
    icon.innerText = "[โ]";
    icon.style.marginLeft = "6px";
    copyAllBtn.appendChild(icon);
    setTimeout(()=>{icon.remove();},1000);
  });
});

function addToHistory(text){
  const lineDiv = document.createElement("div");
  lineDiv.style.display = "flex";
  lineDiv.style.alignItems = "center";
  lineDiv.style.gap = "6px";
  lineDiv.style.padding = "2px 6px";
  lineDiv.style.background = "#1a1a1a";
  lineDiv.style.borderRadius = "4px";
  lineDiv.style.margin = "2px 2px";
  lineDiv.style.width = "auto";

  // ุนูุตุฑ ูุคูุช ูุชุญููู HTML ุฅูู ูุต ุฎุงู
  const tempDiv = document.createElement("div");
  tempDiv.innerHTML = text;
  const cleanText = tempDiv.textContent || tempDiv.innerText || "";

  // ุงููุต
  const spanText = document.createElement("span");
  spanText.innerText = cleanText; // ุงุณุชุฎุฏู ุงููุต ุงููุธูู
  spanText.style.cursor = "pointer";
  spanText.style.flex = "1";
  spanText.style.textAlign = "center";

  // ูุณุฎ ุนูุฏ ุงูุถุบุท
  spanText.addEventListener("click", ()=>{
    navigator.clipboard.writeText(cleanText).then(()=>{
      const copyIcon = document.createElement("span");
      copyIcon.innerText = "[โ]";
      copyIcon.style.marginLeft = "6px";
      spanText.appendChild(copyIcon);
      setTimeout(()=>{copyIcon.remove();},1000);
    });
  });

  // ุฒุฑ ุงูุญุฐู โ
  const delBtn = document.createElement("button");
  delBtn.innerText = "X";
  delBtn.style.background = "red";
  delBtn.style.color = "white";
  delBtn.style.border = "none";
  delBtn.style.borderRadius = "3px";
  delBtn.style.cursor = "pointer";
  delBtn.style.fontSize = "12px";
  delBtn.style.padding = "0 3px";

  delBtn.addEventListener("click", (e)=>{
    e.stopPropagation(); // ููุน ูุณุฎ ุงููุต ุนูุฏ ุงูุถุบุท ุนูู ุฒุฑ ุงูุญุฐู
    lineDiv.remove();
  });

  lineDiv.appendChild(spanText);
  lineDiv.appendChild(delBtn);

  if (historyEl.firstChild) {
    historyEl.insertBefore(lineDiv, historyEl.firstChild); 
  } else {
    historyEl.appendChild(lineDiv);
  }

  historyEl.scrollTop = 0;
}

function toggleSmartMenu(){smartMenu.style.display="none";}

// === ุฒุฑ ุงููุงุฆูุฉ ุงูุนูููุฉ ===
// === ุฒุฑ ุงููุงุฆูุฉ ุงูุนูููุฉ ===
const menuBtn = document.getElementById('menuBtn');
const sideMenu = document.getElementById('sideMenu');

// ุนูุฏ ุงูุถุบุท ุนูู ุฒุฑ ุงููุงุฆูุฉ
menuBtn.addEventListener('click', (e) => {
    e.stopPropagation(); // ููุน ุฅุบูุงููุง ููุฑ ุงูุถุบุท
    sideMenu.classList.add('show');
    menuBtn.style.display = 'none';
});

// ุนูุฏ ุงูุถุบุท ูู ุฃู ููุงู ุฎุงุฑุฌ ุงููุงุฆูุฉ
window.addEventListener('click', (e) => {
    if (!sideMenu.contains(e.target) && e.target !== menuBtn) {
        sideMenu.classList.remove('show');
        menuBtn.style.display = 'inline-block';
    }
});

// ููุน ุงูุฅุบูุงู ุนูุฏ ุงูุถุบุท ุฏุงุฎู ุงููุงุฆูุฉ
sideMenu.addEventListener('click', (e) => e.stopPropagation());


// === ุฒุฑ ุงูุงุณุชุนูุงู ุงูุฏุงุฆุฑู ุฃุณูู ุงูููุชุฑ ===
//ููุงู ุนูุตุฑ ูุน id="helpBtn" ูุฐุง ูุชุญูู ูู ูุฌูุฏู ูุจู ุฅุถุงูุฉ ูุณุชูุนู ุงูุฃุญุฏุงุซ ุญุชู ูุง ูุณุจุจ ุฎุทุฃ.
const helpBtn = document.getElementById('helpBtn');
const helpModal = document.getElementById('helpModal');
if(helpBtn){
  helpBtn.addEventListener('mouseenter', ()=>{
      helpBtn.style.backgroundColor = 'rgba(255, 204, 0, 1)';
      helpBtn.style.boxShadow = '0 0 20px rgba(255,255,0,0.8)';
  });

  helpBtn.addEventListener('mouseleave', ()=>{
      helpBtn.style.backgroundColor = 'rgba(255, 204, 0, 0.4)';
      helpBtn.style.boxShadow = '0 0 10px rgba(255,255,0,0.3)';
  });

  helpBtn.addEventListener('click', ()=>{
      helpModal.style.display = 'block';
  });
}

window.addEventListener('click', (e)=>{
    if(e.target === helpModal){
        helpModal.style.display = 'none';
    }
});

// === ุชุตุฏูุฑ ุงููููุงุช ุงูุฐููุฉ ูููู JSON ===
function exportSmartWords() {
  try {
    const dataStr = JSON.stringify(smartWords, null, 2);
    const blob = new Blob([dataStr], { type: "application/json" });
    const url = URL.createObjectURL(blob);

    const a = document.createElement("a");
    a.href = url;
    // ุงุณู ุงูููู ูุงุจู ููุชุบููุฑ ูู ุฃุฑุฏุช
    a.download = "recovery_txt.json";
    a.click();

    URL.revokeObjectURL(url);
  } catch (err) {
    alert("ูุดู ุงูุชุตุฏูุฑ");
  }
}

// === ุงุณุชูุฑุงุฏ ุงููููุงุช ุงูุฐููุฉ ูู ููู JSON ===
function importSmartWords(event) {
  const file = event.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = function(e) {
    try {
      const imported = JSON.parse(e.target.result);
      if (typeof imported === "object" && imported !== null) {
        // ุฏูุฌ ุงููุญุชูู ุงููุณุชูุฑุฏ ูุน smartWords ุงูุญุงูู
        smartWords = { ...smartWords, ...imported };
        renderSmartWords();
        alert("โ ุชู ุงุณุชูุฑุงุฏ ุงููููุงุช ุจูุฌุงุญ");
      } else {
        alert("X ุชูุณูู ุงูููู ุบูุฑ ุตุญูุญ");
      }
    } catch (err) {
      alert("X ููู ุบูุฑ ุตุงูุญ");
    }
    // ุฅุนุงุฏุฉ ุชุนููู ูููุฉ input ุญุชู ุชุณูุญ ุจุชุญููู ููุณ ุงูููู ูุฑุฉ ุซุงููุฉ ุฅุฐุง ุฑุบุจ ุงููุณุชุฎุฏู
    event.target.value = "";
  };
  reader.readAsText(file);
}

// === ุฒุฑ "ุฅุฏุฑุงุฌ ุชุตุญูุญ" ===
// === ุฒุฑ "ุฅุฏุฑุงุฌ ุชุตุญูุญ" ูุน ุชุบููุฑ ุงููุต ูุฅุบูุงู ุนูุฏ ุงูุถุบุท ุฎุงุฑุฌ ===
const smartBtn = document.getElementById("smartWordsBtn");
const smartMenu = document.getElementById("smartWordsMenu");
let menuOpen = false;

smartBtn.addEventListener("click", (e) => {
  e.stopPropagation(); // ููุน ุญุฏุซ ุงูุฅุบูุงู ุนูุฏ ุงูุถุบุท ุนูู ุงูุฒุฑ ููุณู
  menuOpen = !menuOpen;
  smartMenu.style.display = menuOpen ? "flex" : "none";
  smartBtn.innerText = menuOpen ? "ุฅุบูุงู" : "ุชุตุญูุญ";
  smartMenu.style.flexDirection = "column";
});

// ุฅุบูุงู ุงููุงุฆูุฉ ุนูุฏ ุงูุถุบุท ูู ุฃู ููุงู ุขุฎุฑ
window.addEventListener("click", (e) => {
  if(menuOpen && !smartMenu.contains(e.target) && e.target !== smartBtn) {
    smartMenu.style.display = "none";
    smartBtn.innerText = "ุชุตุญูุญ";
    menuOpen = false;
  }
});

// ุฏุงูุฉ ูุฅุถุงูุฉ ุงููููุฉ ุงูุฎุงุทุฆุฉ + ุงูุชุตุญูุญ
function addSmartWord() {
  const wrong = document.getElementById("wrongWord").value.trim();
  const correct = document.getElementById("correctWord").value.trim();

  if (wrong && correct) {
    smartWords[wrong] = correct;
    renderSmartWords();
    document.getElementById("wrongWord").value = "";
    document.getElementById("correctWord").value = "";
  }
}

// ุฏุงูุฉ ุนุฑุถ ุงููููุงุช ุงููุถุงูุฉ
function renderSmartWords() {
  const list = document.getElementById("smartWordsList");
  list.innerHTML = "";
  for (const wrong in smartWords) {
    const div = document.createElement("div");
    div.className = "smartWordItem";
    div.innerHTML = `<span>${wrong} โ ${smartWords[wrong]}</span>`;
    const delBtn = document.createElement("button");
    delBtn.innerText = "X";
    delBtn.onclick = () => {
      delete smartWords[wrong];
      renderSmartWords();
    };
    div.appendChild(delBtn);
    list.appendChild(div);
  }
}
</script>
</body>
</html>
